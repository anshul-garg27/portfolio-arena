<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>THE DEV TALK | Ep. 47: Building at Walmart Scale - with Anshull Garg</title>
<meta name="description" content="Listen to Anshull Garg's portfolio as a podcast episode. Software Developer at Walmart tells his story.">
<meta name="theme-color" content="#111111">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

<style>
/* ============================================================
   CSS CUSTOM PROPERTIES
   ============================================================ */
:root {
  --bg-deep: #111111;
  --bg-card: #1A1A1A;
  --bg-card-hover: #222222;
  --bg-elevated: #252525;
  --bg-surface: #2A2A2A;
  --purple: #7C3AED;
  --purple-light: #A78BFA;
  --purple-dark: #5B21B6;
  --purple-glow: rgba(124, 58, 237, 0.3);
  --purple-faint: rgba(124, 58, 237, 0.08);
  --orange: #F97316;
  --orange-light: #FB923C;
  --orange-dark: #EA580C;
  --orange-glow: rgba(249, 115, 22, 0.3);
  --text-primary: #F5F5F5;
  --text-secondary: #A0A0A0;
  --text-muted: #666666;
  --border: #2A2A2A;
  --border-light: #333333;
  --font-display: 'DM Sans', sans-serif;
  --font-body: 'Inter', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --player-height: 96px;
}

/* ============================================================
   RESET & BASE
   ============================================================ */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-body);
  background: var(--bg-deep);
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
  padding-bottom: calc(var(--player-height) + 40px);
}

/* Subtle noise texture */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
  pointer-events: none;
  z-index: 0;
}

a { color: var(--purple-light); text-decoration: none; }
a:hover { color: var(--orange); }

::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg-deep); }
::-webkit-scrollbar-thumb { background: var(--bg-surface); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--purple); }

::selection {
  background: var(--purple);
  color: white;
}

/* ============================================================
   CONTAINER
   ============================================================ */
.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 0 24px;
  position: relative;
  z-index: 1;
}

/* ============================================================
   HEADER / NAV
   ============================================================ */
.header {
  padding: 20px 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.show-brand {
  display: flex;
  align-items: center;
  gap: 12px;
}

.show-logo {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, var(--purple), var(--orange));
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 800;
  font-family: var(--font-display);
  color: white;
  letter-spacing: -1px;
}

.show-brand-text {
  font-family: var(--font-display);
  font-size: 14px;
  font-weight: 700;
  color: var(--text-secondary);
  letter-spacing: 2px;
  text-transform: uppercase;
}

.header-actions {
  display: flex;
  gap: 8px;
}

.header-btn {
  background: var(--bg-card);
  border: 1px solid var(--border-light);
  color: var(--text-secondary);
  padding: 8px 16px;
  border-radius: var(--radius-sm);
  font-family: var(--font-body);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
}

.header-btn:hover {
  background: var(--bg-elevated);
  color: var(--text-primary);
  border-color: var(--purple);
}

/* ============================================================
   HERO / COVER ART
   ============================================================ */
.hero {
  padding: 60px 0 40px;
  display: flex;
  gap: 40px;
  align-items: flex-start;
}

.cover-art {
  width: 280px;
  height: 280px;
  min-width: 280px;
  border-radius: var(--radius-lg);
  background: linear-gradient(135deg, #1a0533 0%, var(--purple-dark) 30%, var(--purple) 60%, var(--orange) 100%);
  position: relative;
  overflow: hidden;
  box-shadow:
    0 20px 60px rgba(0,0,0,0.5),
    0 0 40px var(--purple-glow);
}

.cover-art::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 30% 70%, rgba(249, 115, 22, 0.3) 0%, transparent 50%),
    radial-gradient(circle at 70% 30%, rgba(124, 58, 237, 0.4) 0%, transparent 50%);
}

.cover-art::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, transparent 40%, rgba(0,0,0,0.4) 100%);
}

.cover-content {
  position: absolute;
  inset: 0;
  z-index: 2;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 24px;
}

.cover-show-name {
  font-family: var(--font-display);
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: rgba(255,255,255,0.85);
}

.cover-ep-info {
  font-family: var(--font-display);
}

.cover-ep-number {
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--orange-light);
  margin-bottom: 6px;
}

.cover-ep-title {
  font-size: 20px;
  font-weight: 800;
  line-height: 1.2;
  color: white;
}

.cover-waveform {
  position: absolute;
  bottom: 70px;
  left: 24px;
  right: 24px;
  height: 40px;
  display: flex;
  align-items: flex-end;
  gap: 2px;
  z-index: 2;
  opacity: 0.5;
}

.cover-waveform .bar {
  flex: 1;
  background: rgba(255,255,255,0.6);
  border-radius: 1px;
  transition: height 0.15s ease;
}

.hero-info {
  flex: 1;
  padding-top: 8px;
}

.episode-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: var(--purple-faint);
  border: 1px solid rgba(124, 58, 237, 0.2);
  color: var(--purple-light);
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 1px;
  text-transform: uppercase;
  margin-bottom: 16px;
}

.episode-badge .dot {
  width: 6px;
  height: 6px;
  background: var(--purple-light);
  border-radius: 50%;
  animation: pulse-dot 2s infinite;
}

@keyframes pulse-dot {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

.episode-title {
  font-family: var(--font-display);
  font-size: 32px;
  font-weight: 800;
  line-height: 1.15;
  margin-bottom: 12px;
  color: var(--text-primary);
}

.episode-title .highlight {
  background: linear-gradient(135deg, var(--purple-light), var(--orange));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.episode-meta {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 20px;
  font-size: 14px;
  color: var(--text-secondary);
}

.episode-meta .sep {
  width: 4px;
  height: 4px;
  background: var(--text-muted);
  border-radius: 50%;
}

.episode-description {
  font-size: 15px;
  line-height: 1.7;
  color: var(--text-secondary);
  margin-bottom: 28px;
}

.hero-actions {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;
}

.play-episode-btn {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  background: linear-gradient(135deg, var(--purple), var(--purple-dark));
  color: white;
  border: none;
  padding: 14px 32px;
  border-radius: 50px;
  font-family: var(--font-display);
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
  transition: var(--transition);
  box-shadow: 0 4px 20px var(--purple-glow);
}

.play-episode-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px var(--purple-glow);
}

.play-episode-btn:active {
  transform: translateY(0);
}

.play-episode-btn svg {
  width: 20px;
  height: 20px;
  fill: currentColor;
}

.secondary-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: transparent;
  color: var(--text-secondary);
  border: 1px solid var(--border-light);
  padding: 12px 24px;
  border-radius: 50px;
  font-family: var(--font-body);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
}

.secondary-btn:hover {
  color: var(--text-primary);
  border-color: var(--text-muted);
}

.secondary-btn svg {
  width: 16px;
  height: 16px;
  fill: currentColor;
}

/* ============================================================
   LIVE WAVEFORM VISUALIZER
   ============================================================ */
.waveform-section {
  padding: 20px 0 40px;
}

.waveform-container {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 24px;
  position: relative;
  overflow: hidden;
}

.waveform-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--purple), var(--orange), transparent);
  opacity: 0.5;
}

.waveform-label {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.waveform-label-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.live-indicator {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--orange);
}

.live-indicator .live-dot {
  width: 8px;
  height: 8px;
  background: var(--orange);
  border-radius: 50%;
  animation: live-pulse 1.5s infinite;
  box-shadow: 0 0 8px var(--orange-glow);
}

.live-indicator.inactive {
  color: var(--text-muted);
}

.live-indicator.inactive .live-dot {
  background: var(--text-muted);
  animation: none;
  box-shadow: none;
}

@keyframes live-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(0.8); }
}

.waveform-status {
  font-size: 12px;
  color: var(--text-muted);
  font-family: var(--font-mono);
}

.waveform-bars {
  height: 80px;
  display: flex;
  align-items: center;
  gap: 2px;
  overflow: hidden;
}

.waveform-bars .bar {
  flex: 1;
  min-width: 3px;
  background: linear-gradient(180deg, var(--purple), var(--purple-dark));
  border-radius: 2px;
  height: 4px;
  transition: height 0.1s ease-out;
  opacity: 0.6;
}

.waveform-bars.active .bar {
  opacity: 1;
}

/* ============================================================
   SECTIONS SHARED
   ============================================================ */
.section {
  padding: 40px 0;
}

.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 24px;
}

.section-title {
  font-family: var(--font-display);
  font-size: 22px;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 10px;
}

.section-title .icon {
  width: 32px;
  height: 32px;
  background: var(--purple-faint);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
}

.section-toggle {
  background: none;
  border: none;
  color: var(--text-muted);
  font-family: var(--font-body);
  font-size: 13px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: var(--transition);
}

.section-toggle:hover {
  color: var(--purple-light);
}

/* ============================================================
   CHAPTERS
   ============================================================ */
.chapters-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.chapter-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 14px 16px;
  background: var(--bg-card);
  border: 1px solid transparent;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition);
  position: relative;
  overflow: hidden;
}

.chapter-item:hover {
  background: var(--bg-card-hover);
  border-color: var(--border-light);
}

.chapter-item.active {
  background: var(--bg-card-hover);
  border-color: var(--purple);
  box-shadow: 0 0 20px rgba(124, 58, 237, 0.1);
}

.chapter-item.active::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(180deg, var(--purple), var(--orange));
  border-radius: 0 2px 2px 0;
}

.chapter-number {
  width: 36px;
  height: 36px;
  min-width: 36px;
  background: var(--bg-surface);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-mono);
  font-size: 13px;
  font-weight: 500;
  color: var(--text-muted);
  transition: var(--transition);
}

.chapter-item.active .chapter-number {
  background: linear-gradient(135deg, var(--purple), var(--orange));
  color: white;
}

.chapter-item.active .chapter-number .num {
  display: none;
}

.chapter-item.active .chapter-number .eq-icon {
  display: flex;
}

.chapter-number .eq-icon {
  display: none;
  gap: 2px;
  align-items: flex-end;
  height: 14px;
}

.chapter-number .eq-icon span {
  width: 2px;
  background: white;
  border-radius: 1px;
  animation: eq-bar 0.8s ease-in-out infinite;
}

.chapter-number .eq-icon span:nth-child(1) { height: 40%; animation-delay: 0s; }
.chapter-number .eq-icon span:nth-child(2) { height: 70%; animation-delay: 0.2s; }
.chapter-number .eq-icon span:nth-child(3) { height: 50%; animation-delay: 0.4s; }

@keyframes eq-bar {
  0%, 100% { transform: scaleY(1); }
  50% { transform: scaleY(0.4); }
}

.chapter-info {
  flex: 1;
}

.chapter-title {
  font-family: var(--font-display);
  font-size: 15px;
  font-weight: 600;
  margin-bottom: 2px;
}

.chapter-subtitle {
  font-size: 13px;
  color: var(--text-muted);
}

.chapter-time {
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--text-muted);
  min-width: 44px;
  text-align: right;
}

.chapter-item.active .chapter-title {
  color: var(--purple-light);
}

.chapter-duration {
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-surface);
  padding: 2px 8px;
  border-radius: 10px;
}

/* ============================================================
   SHOW NOTES
   ============================================================ */
.show-notes-content {
  display: grid;
  gap: 24px;
}

.guest-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 28px;
  display: flex;
  gap: 24px;
  align-items: flex-start;
}

.guest-avatar {
  width: 80px;
  height: 80px;
  min-width: 80px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--purple), var(--orange));
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-display);
  font-size: 28px;
  font-weight: 800;
  color: white;
}

.guest-info h3 {
  font-family: var(--font-display);
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 4px;
}

.guest-info .role {
  font-size: 14px;
  color: var(--orange);
  font-weight: 500;
  margin-bottom: 12px;
}

.guest-info .bio {
  font-size: 14px;
  line-height: 1.7;
  color: var(--text-secondary);
}

.guest-links {
  display: flex;
  gap: 8px;
  margin-top: 16px;
}

.guest-link {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: var(--bg-surface);
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 13px;
  color: var(--text-secondary);
  transition: var(--transition);
}

.guest-link:hover {
  background: var(--purple-faint);
  color: var(--purple-light);
}

.links-mentioned {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 24px;
}

.links-mentioned h4 {
  font-family: var(--font-display);
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 16px;
  color: var(--text-secondary);
}

.link-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 0;
  border-bottom: 1px solid var(--border);
  transition: var(--transition);
}

.link-item:last-child { border-bottom: none; }

.link-item:hover .link-name { color: var(--purple-light); }

.link-icon {
  width: 32px;
  height: 32px;
  min-width: 32px;
  background: var(--bg-surface);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
}

.link-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  transition: var(--transition);
}

.link-url {
  font-size: 12px;
  color: var(--text-muted);
  font-family: var(--font-mono);
}

.related-episodes {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 24px;
}

.related-episodes h4 {
  font-family: var(--font-display);
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 16px;
  color: var(--text-secondary);
}

.related-ep {
  display: flex;
  gap: 14px;
  padding: 12px 0;
  border-bottom: 1px solid var(--border);
  cursor: pointer;
  transition: var(--transition);
}

.related-ep:last-child { border-bottom: none; }
.related-ep:hover { opacity: 0.8; }

.related-ep-art {
  width: 48px;
  height: 48px;
  min-width: 48px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 700;
  color: white;
}

.related-ep-info .ep-num {
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--text-muted);
}

.related-ep-info .ep-name {
  font-size: 14px;
  font-weight: 500;
  margin-top: 2px;
}

/* ============================================================
   TRANSCRIPT
   ============================================================ */
.transcript-toggle-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition);
}

.transcript-toggle-bar:hover {
  background: var(--bg-card-hover);
}

.transcript-toggle-bar .left {
  display: flex;
  align-items: center;
  gap: 10px;
  font-family: var(--font-display);
  font-size: 16px;
  font-weight: 600;
}

.transcript-toggle-bar .chevron {
  transition: var(--transition);
  color: var(--text-muted);
}

.transcript-toggle-bar.open .chevron {
  transform: rotate(180deg);
}

.transcript-body {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.transcript-body.open {
  max-height: 5000px;
}

.transcript-inner {
  padding: 20px 0;
}

.transcript-entry {
  display: flex;
  gap: 16px;
  padding: 12px 16px;
  border-radius: var(--radius-md);
  transition: var(--transition);
  cursor: pointer;
  margin-bottom: 4px;
}

.transcript-entry:hover {
  background: var(--bg-card);
}

.transcript-entry.active {
  background: var(--bg-card);
  border-left: 3px solid var(--purple);
}

.transcript-entry.active .transcript-text {
  color: var(--text-primary);
}

.transcript-timestamp {
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--purple-light);
  min-width: 48px;
  padding-top: 3px;
  cursor: pointer;
}

.transcript-timestamp:hover {
  color: var(--orange);
}

.transcript-speaker {
  font-family: var(--font-display);
  font-size: 13px;
  font-weight: 700;
  color: var(--orange);
  margin-bottom: 4px;
}

.transcript-entry .host .transcript-speaker {
  color: var(--purple-light);
}

.transcript-text {
  font-size: 14px;
  line-height: 1.8;
  color: var(--text-secondary);
}

.transcript-text .current-word {
  background: var(--purple-faint);
  color: var(--purple-light);
  padding: 1px 3px;
  border-radius: 3px;
}

/* ============================================================
   STICKY PLAYER
   ============================================================ */
.player {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: var(--player-height);
  background: var(--bg-card);
  border-top: 1px solid var(--border-light);
  z-index: 1000;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.player-progress-bar {
  position: absolute;
  top: -3px;
  left: 0;
  right: 0;
  height: 6px;
  background: var(--bg-surface);
  cursor: pointer;
  transition: height 0.2s;
}

.player-progress-bar:hover {
  height: 8px;
  top: -5px;
}

.player-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--purple), var(--orange));
  border-radius: 0 3px 3px 0;
  position: relative;
  transition: width 0.3s linear;
  width: 0%;
}

.player-progress-fill::after {
  content: '';
  position: absolute;
  right: -4px;
  top: 50%;
  transform: translateY(-50%);
  width: 12px;
  height: 12px;
  background: white;
  border-radius: 50%;
  box-shadow: 0 0 6px rgba(0,0,0,0.3);
  opacity: 0;
  transition: opacity 0.2s;
}

.player-progress-bar:hover .player-progress-fill::after {
  opacity: 1;
}

.player-inner {
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 24px;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 20px;
}

.player-track-info {
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 200px;
  flex: 0 0 auto;
}

.player-mini-art {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-sm);
  background: linear-gradient(135deg, var(--purple-dark), var(--orange));
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-display);
  font-size: 10px;
  font-weight: 800;
  color: white;
  letter-spacing: 0.5px;
}

.player-track-text {
  overflow: hidden;
}

.player-track-title {
  font-family: var(--font-display);
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 180px;
}

.player-track-show {
  font-size: 12px;
  color: var(--text-muted);
}

.player-controls {
  display: flex;
  align-items: center;
  gap: 16px;
  flex: 1;
  justify-content: center;
}

.player-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.player-btn:hover {
  color: var(--text-primary);
}

.player-btn svg {
  width: 20px;
  height: 20px;
  fill: currentColor;
}

.player-btn.skip-btn {
  font-family: var(--font-mono);
  font-size: 10px;
  font-weight: 600;
  gap: 2px;
}

.player-btn.play-btn {
  width: 48px;
  height: 48px;
  background: var(--purple);
  border-radius: 50%;
  color: white;
  transition: var(--transition);
}

.player-btn.play-btn:hover {
  background: var(--purple-light);
  transform: scale(1.05);
  box-shadow: 0 0 20px var(--purple-glow);
}

.player-btn.play-btn svg {
  width: 22px;
  height: 22px;
}

.player-time {
  display: flex;
  align-items: center;
  gap: 6px;
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--text-muted);
}

.player-right {
  display: flex;
  align-items: center;
  gap: 16px;
  min-width: 200px;
  flex: 0 0 auto;
  justify-content: flex-end;
}

.speed-btn {
  background: var(--bg-surface);
  border: 1px solid var(--border-light);
  color: var(--text-secondary);
  padding: 4px 10px;
  border-radius: 20px;
  font-family: var(--font-mono);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  min-width: 42px;
  text-align: center;
}

.speed-btn:hover {
  border-color: var(--purple);
  color: var(--purple-light);
}

.volume-control {
  display: flex;
  align-items: center;
  gap: 8px;
}

.volume-control svg {
  width: 18px;
  height: 18px;
  fill: var(--text-muted);
}

.volume-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 80px;
  height: 4px;
  background: var(--bg-surface);
  border-radius: 2px;
  outline: none;
  cursor: pointer;
}

.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition);
}

.volume-slider::-webkit-slider-thumb:hover {
  background: var(--purple-light);
  transform: scale(1.2);
}

.player-chapter-indicator {
  font-size: 12px;
  color: var(--text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 140px;
}

.player-chapter-indicator .ch-label {
  color: var(--orange);
  font-weight: 600;
}

/* ============================================================
   SPEAKING OVERLAY
   ============================================================ */
.speaking-content {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 32px;
  margin-top: 16px;
  display: none;
}

.speaking-content.visible {
  display: block;
  animation: fadeSlideIn 0.4s ease;
}

@keyframes fadeSlideIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.speaking-chapter-title {
  font-family: var(--font-display);
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 8px;
}

.speaking-chapter-sub {
  font-size: 14px;
  color: var(--text-muted);
  margin-bottom: 20px;
}

.speaking-text {
  font-size: 16px;
  line-height: 2;
  color: var(--text-secondary);
}

.speaking-text .spoken {
  color: var(--text-primary);
  transition: color 0.3s;
}

.speaking-text .current-sentence {
  color: var(--purple-light);
  font-weight: 500;
}

/* ============================================================
   FOOTER
   ============================================================ */
.footer {
  padding: 60px 0 40px;
  text-align: center;
  border-top: 1px solid var(--border);
}

.footer-brand {
  font-family: var(--font-display);
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 8px;
  background: linear-gradient(135deg, var(--purple-light), var(--orange));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.footer-text {
  font-size: 13px;
  color: var(--text-muted);
  line-height: 1.6;
}

.footer-links {
  display: flex;
  gap: 24px;
  justify-content: center;
  margin-top: 20px;
}

.footer-links a {
  font-size: 13px;
  color: var(--text-muted);
  transition: var(--transition);
}

.footer-links a:hover {
  color: var(--purple-light);
}

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 768px) {
  .hero {
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding-top: 40px;
  }

  .cover-art {
    width: 220px;
    height: 220px;
    min-width: 220px;
  }

  .episode-title { font-size: 24px; }
  .episode-meta { justify-content: center; }
  .hero-actions { justify-content: center; }

  .guest-card { flex-direction: column; align-items: center; text-align: center; }
  .guest-links { justify-content: center; }

  .player-track-info { min-width: auto; }
  .player-track-title { max-width: 100px; }
  .player-right { min-width: auto; }
  .volume-control { display: none; }
  .player-chapter-indicator { display: none; }
  .player-time { display: none; }

  .header-actions { display: none; }
}

@media (max-width: 480px) {
  .container { padding: 0 16px; }
  .cover-art { width: 180px; height: 180px; min-width: 180px; }
  .player-track-info { display: none; }
  .speed-btn { display: none; }
}

/* ============================================================
   ANIMATIONS
   ============================================================ */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.fade-in {
  animation: fadeIn 0.6s ease forwards;
}

/* Smooth chapter scroll highlight */
.chapter-item.flash {
  animation: chapterFlash 0.8s ease;
}

@keyframes chapterFlash {
  0% { background: rgba(124, 58, 237, 0.15); }
  100% { background: var(--bg-card); }
}
</style>
</head>

<body>

<!-- ============================================================
     HEADER
     ============================================================ -->
<div class="container">
  <header class="header">
    <div class="show-brand">
      <div class="show-logo">DT</div>
      <span class="show-brand-text">The Dev Talk</span>
    </div>
    <div class="header-actions">
      <button class="header-btn" onclick="toggleTranscript()">Transcript</button>
      <button class="header-btn" onclick="document.getElementById('show-notes').scrollIntoView({behavior:'smooth'})">Show Notes</button>
    </div>
  </header>
</div>

<!-- ============================================================
     HERO / COVER ART
     ============================================================ -->
<div class="container">
  <section class="hero">
    <div class="cover-art" id="coverArt">
      <div class="cover-waveform" id="coverWaveform"></div>
      <div class="cover-content">
        <div class="cover-show-name">The Dev Talk</div>
        <div class="cover-ep-info">
          <div class="cover-ep-number">Episode 47</div>
          <div class="cover-ep-title">Building at Walmart Scale</div>
        </div>
      </div>
    </div>

    <div class="hero-info">
      <div class="episode-badge">
        <span class="dot"></span>
        New Episode
      </div>
      <h1 class="episode-title">
        Ep. 47: <span class="highlight">Building at Walmart Scale</span> &mdash; with Anshull Garg
      </h1>
      <div class="episode-meta">
        <span>Feb 8, 2026</span>
        <span class="sep"></span>
        <span>24 min</span>
        <span class="sep"></span>
        <span>Season 3</span>
      </div>
      <p class="episode-description">
        This week on The Dev Talk, we sit down with Anshull Garg, a Software Developer at Walmart Global Tech. We dig into what it means to build at Fortune 1 scale, his journey into software engineering, the tech stack powering Walmart's digital commerce, and his advice for developers who want to level up their careers.
      </p>
      <div class="hero-actions">
        <button class="play-episode-btn" id="heroPlayBtn" onclick="togglePlayback()">
          <svg viewBox="0 0 24 24" id="heroPlayIcon"><polygon points="5,3 19,12 5,21"/></svg>
          <span id="heroPlayText">Play Episode</span>
        </button>
        <button class="secondary-btn" onclick="document.getElementById('chapters').scrollIntoView({behavior:'smooth'})">
          <svg viewBox="0 0 24 24"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg>
          Chapters
        </button>
      </div>
    </div>
  </section>
</div>

<!-- ============================================================
     WAVEFORM VISUALIZER
     ============================================================ -->
<div class="container">
  <section class="waveform-section">
    <div class="waveform-container">
      <div class="waveform-label">
        <div class="waveform-label-left">
          <div class="live-indicator inactive" id="liveIndicator">
            <span class="live-dot"></span>
            <span id="liveText">Paused</span>
          </div>
        </div>
        <div class="waveform-status" id="waveformStatus">00:00 / 24:00</div>
      </div>
      <div class="waveform-bars" id="waveformBars"></div>
    </div>
  </section>
</div>

<!-- ============================================================
     CURRENTLY SPEAKING SECTION
     ============================================================ -->
<div class="container">
  <div class="speaking-content" id="speakingContent">
    <div class="speaking-chapter-title" id="speakingTitle">Intro &amp; Welcome</div>
    <div class="speaking-chapter-sub" id="speakingSub">Chapter 1 of 8</div>
    <div class="speaking-text" id="speakingText"></div>
  </div>
</div>

<!-- ============================================================
     CHAPTERS
     ============================================================ -->
<div class="container">
  <section class="section" id="chapters">
    <div class="section-header">
      <h2 class="section-title">
        <span class="icon">&#9654;</span>
        Episode Chapters
      </h2>
    </div>
    <div class="chapters-list" id="chaptersList"></div>
  </section>
</div>

<!-- ============================================================
     SHOW NOTES
     ============================================================ -->
<div class="container">
  <section class="section" id="show-notes">
    <div class="section-header">
      <h2 class="section-title">
        <span class="icon">&#128196;</span>
        Show Notes
      </h2>
    </div>

    <div class="show-notes-content">
      <!-- Guest Card -->
      <div class="guest-card">
        <div class="guest-avatar">AG</div>
        <div class="guest-info">
          <h3>Anshull Garg</h3>
          <div class="role">Software Developer at Walmart Global Tech</div>
          <div class="bio">
            Anshull is a software developer at Walmart Global Tech, where he architects and builds scalable applications powering digital commerce at Fortune 1 scale. He specializes in full-stack development with React, Node.js, and cloud infrastructure. When he is not building enterprise systems, you will find him exploring new technologies and contributing to the developer community.
          </div>
          <div class="guest-links">
            <a href="#" class="guest-link" title="LinkedIn">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
              LinkedIn
            </a>
            <a href="#" class="guest-link" title="GitHub">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
              GitHub
            </a>
            <a href="#" class="guest-link" title="Email">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M0 3v18h24v-18h-24zm6.623 7.929l-4.623 5.712v-9.458l4.623 3.746zm-4.141-5.929h19.035l-9.517 7.713-9.518-7.713zm5.694 7.188l3.824 3.099 3.83-3.104 5.612 6.817h-18.779l5.513-6.812zm9.208-1.264l4.616-3.741v9.348l-4.616-5.607z"/></svg>
              Email
            </a>
          </div>
        </div>
      </div>

      <!-- Links Mentioned -->
      <div class="links-mentioned">
        <h4>Links Mentioned in This Episode</h4>
        <a href="#" class="link-item">
          <div class="link-icon">&#127758;</div>
          <div>
            <div class="link-name">Walmart Global Tech Blog</div>
            <div class="link-url">tech.walmart.com</div>
          </div>
        </a>
        <a href="#" class="link-item">
          <div class="link-icon">&#128187;</div>
          <div>
            <div class="link-name">React Documentation</div>
            <div class="link-url">react.dev</div>
          </div>
        </a>
        <a href="#" class="link-item">
          <div class="link-icon">&#9889;</div>
          <div>
            <div class="link-name">Node.js Performance Best Practices</div>
            <div class="link-url">nodejs.org/en/docs/guides</div>
          </div>
        </a>
        <a href="#" class="link-item">
          <div class="link-icon">&#128218;</div>
          <div>
            <div class="link-name">System Design Primer</div>
            <div class="link-url">github.com/donnemartin/system-design-primer</div>
          </div>
        </a>
        <a href="#" class="link-item">
          <div class="link-icon">&#128640;</div>
          <div>
            <div class="link-name">Anshull's Portfolio</div>
            <div class="link-url">anshullgarg.dev</div>
          </div>
        </a>
      </div>

      <!-- Related Episodes -->
      <div class="related-episodes">
        <h4>You Might Also Like</h4>
        <div class="related-ep">
          <div class="related-ep-art" style="background: linear-gradient(135deg, #059669, #10B981);">46</div>
          <div class="related-ep-info">
            <div class="ep-num">Episode 46</div>
            <div class="ep-name">Scaling Microservices at Netflix</div>
          </div>
        </div>
        <div class="related-ep">
          <div class="related-ep-art" style="background: linear-gradient(135deg, #DC2626, #EF4444);">42</div>
          <div class="related-ep-info">
            <div class="ep-num">Episode 42</div>
            <div class="ep-name">The Art of Code Review</div>
          </div>
        </div>
        <div class="related-ep">
          <div class="related-ep-art" style="background: linear-gradient(135deg, #2563EB, #3B82F6);">38</div>
          <div class="related-ep-info">
            <div class="ep-num">Episode 38</div>
            <div class="ep-name">Frontend Performance Deep Dive</div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- ============================================================
     TRANSCRIPT
     ============================================================ -->
<div class="container">
  <section class="section" id="transcript-section">
    <div class="transcript-toggle-bar" id="transcriptToggle" onclick="toggleTranscript()">
      <div class="left">
        <span class="icon" style="font-size: 16px;">&#128220;</span>
        Full Transcript
      </div>
      <span class="chevron" id="transcriptChevron">&#9660;</span>
    </div>
    <div class="transcript-body" id="transcriptBody">
      <div class="transcript-inner" id="transcriptInner"></div>
    </div>
  </section>
</div>

<!-- ============================================================
     FOOTER
     ============================================================ -->
<div class="container">
  <footer class="footer">
    <div class="footer-brand">The Dev Talk Podcast</div>
    <div class="footer-text">
      Conversations with the people building the future of software.<br>
      New episodes every Thursday.
    </div>
    <div class="footer-links">
      <a href="#">Apple Podcasts</a>
      <a href="#">Spotify</a>
      <a href="#">RSS Feed</a>
      <a href="#">Twitter/X</a>
    </div>
  </footer>
</div>

<!-- ============================================================
     STICKY PLAYER
     ============================================================ -->
<div class="player" id="player">
  <div class="player-progress-bar" id="playerProgressBar" onclick="seekToPosition(event)">
    <div class="player-progress-fill" id="playerProgressFill"></div>
  </div>

  <div class="player-inner">
    <div class="player-track-info">
      <div class="player-mini-art">DT</div>
      <div class="player-track-text">
        <div class="player-track-title">Ep. 47: Building at Walmart Scale</div>
        <div class="player-track-show">The Dev Talk &middot; Anshull Garg</div>
      </div>
    </div>

    <div class="player-controls">
      <div class="player-time">
        <span id="timeElapsed">0:00</span>
      </div>

      <button class="player-btn skip-btn" onclick="skipBackward()" title="Rewind 15 seconds">
        <svg viewBox="0 0 24 24"><path d="M11.99 5V1l-5 5 5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6h-2c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/></svg>
        <span style="font-size:9px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);margin-top:1px;">15</span>
      </button>

      <button class="player-btn play-btn" id="playerPlayBtn" onclick="togglePlayback()" title="Play / Pause">
        <svg viewBox="0 0 24 24" id="playerPlayIcon"><polygon points="6,3 20,12 6,21"/></svg>
      </button>

      <button class="player-btn skip-btn" onclick="skipForward()" title="Forward 15 seconds">
        <svg viewBox="0 0 24 24"><path d="M12.01 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8z"/></svg>
        <span style="font-size:9px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);margin-top:1px;">15</span>
      </button>

      <div class="player-time">
        <span id="timeTotal">24:00</span>
      </div>
    </div>

    <div class="player-right">
      <button class="speed-btn" id="speedBtn" onclick="cycleSpeed()" title="Playback speed">1x</button>

      <div class="volume-control">
        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.05" value="0.8" oninput="setVolume(this.value)">
      </div>

      <div class="player-chapter-indicator" id="playerChapterIndicator">
        <span class="ch-label">Ch 1:</span> Intro
      </div>
    </div>
  </div>
</div>

<!-- ============================================================
     JAVASCRIPT
     ============================================================ -->
<script>
// ============================================================
// PODCAST DATA - Chapters, transcript, and spoken content
// ============================================================
const CHAPTERS = [
  {
    id: 0,
    time: "00:00",
    seconds: 0,
    title: "Intro & Welcome",
    subtitle: "Setting the stage",
    duration: "2:15",
    content: [
      { speaker: "host", text: "Welcome back to The Dev Talk, the podcast where we sit down with the engineers building the software that runs the world. I am your host, and today we have a really special episode. We are going episode 47, and our guest is someone who builds software at one of the biggest companies on the planet." },
      { speaker: "host", text: "Joining us today is Anshull Garg, a Software Developer at Walmart Global Tech. For those who do not know, Walmart is the Fortune number one company, serving hundreds of millions of customers. And Anshull is right there in the thick of it, building the systems that power that digital experience." },
      { speaker: "guest", text: "Hey, thanks so much for having me. Really excited to be here and share a bit about what we are working on. It is going to be a great conversation." }
    ]
  },
  {
    id: 1,
    time: "02:15",
    seconds: 135,
    title: "Who is Anshull?",
    subtitle: "Background & journey into tech",
    duration: "3:15",
    content: [
      { speaker: "host", text: "So Anshull, let us start from the beginning. How did you get into software development? What is your origin story?" },
      { speaker: "guest", text: "Great question. I have always been curious about how things work under the hood. I started tinkering with code early on, and what really hooked me was that moment when you write something and it just comes alive on the screen. That instant feedback loop, that power to create something from nothing, that is what drew me in." },
      { speaker: "guest", text: "I studied computer science and dove deep into full stack development. I loved the intersection of building things that users actually interact with on the frontend, while also understanding the complex systems running behind the scenes. That dual perspective is what I think makes a great developer." },
      { speaker: "host", text: "And that eventually led you to Walmart Global Tech. How did that happen?" },
      { speaker: "guest", text: "I was drawn to the scale. There is a massive difference between building a side project that handles a few hundred users and building systems that serve millions of people every single day. I wanted that challenge. Walmart gave me the opportunity to work on problems that very few companies in the world can offer." }
    ]
  },
  {
    id: 2,
    time: "05:30",
    seconds: 330,
    title: "Life at Walmart Global Tech",
    subtitle: "Inside Fortune #1's tech org",
    duration: "4:15",
    content: [
      { speaker: "host", text: "Let us talk about Walmart Global Tech. I think a lot of people might not realize just how massive the tech operation is at Walmart. Can you paint a picture for us?" },
      { speaker: "guest", text: "Absolutely. People hear Walmart and they think retail stores, right? But Walmart Global Tech is one of the largest technology organizations in the world. We are talking about powering e-commerce at a scale that rivals anyone. The digital platform handles millions of transactions, serves customers across multiple countries, and runs on incredibly sophisticated infrastructure." },
      { speaker: "guest", text: "On any given day, I might be working on optimizing a critical API that handles thousands of requests per second, collaborating with cross-functional teams on a new feature launch, or diving into performance profiling to shave milliseconds off load times. When you are at Walmart scale, those milliseconds matter. They translate directly into customer experience and revenue." },
      { speaker: "host", text: "That sounds intense. What is the engineering culture like?" },
      { speaker: "guest", text: "It is deeply collaborative. We do thorough code reviews, pair programming when tackling complex problems, and there is a real emphasis on knowledge sharing. The engineering culture values clean, maintainable code. We are not just shipping features, we are building systems that need to be reliable and scalable for years to come. There is a strong sense of ownership. When you build something, you own it end to end." }
    ]
  },
  {
    id: 3,
    time: "09:45",
    seconds: 585,
    title: "Key Projects Deep Dive",
    subtitle: "Building at enterprise scale",
    duration: "4:35",
    content: [
      { speaker: "host", text: "Can you walk us through some of the projects you have worked on? Without giving away anything proprietary of course." },
      { speaker: "guest", text: "Sure. One of the projects I am most proud of involved architecting a system that significantly improved the performance of a customer-facing application. We were dealing with complex state management, data flowing from multiple microservices, and it all needed to render fast on every device. I led the effort to redesign the data layer, implementing smart caching strategies and optimistic UI updates. The result was a measurably faster experience for millions of users." },
      { speaker: "guest", text: "Another project that was fascinating was building internal tooling. We created a developer productivity platform that streamlined the deployment pipeline. Think of it as building tools for the people who build the tools. We reduced deployment times significantly and made the whole process more reliable. That kind of force-multiplier work is incredibly satisfying because it impacts every engineering team." },
      { speaker: "host", text: "What about the technical challenges? What keeps you up at night?" },
      { speaker: "guest", text: "Honestly, at this scale, everything is a challenge. You cannot just throw together a solution and hope it works. You have to think about edge cases, failure modes, graceful degradation. One of the hardest problems I tackled was building a system that needed to handle massive traffic spikes, like during major shopping events, without any degradation. That required deep understanding of load balancing, caching layers, and database optimization." }
    ]
  },
  {
    id: 4,
    time: "14:20",
    seconds: 860,
    title: "Tech Stack & Skills",
    subtitle: "Tools of the trade",
    duration: "3:40",
    content: [
      { speaker: "host", text: "Let us get into the tech stack. What are the primary technologies you work with?" },
      { speaker: "guest", text: "On the frontend, React is at the core. I work extensively with React, TypeScript, and Next.js for building performant, type-safe user interfaces. Tailwind CSS for styling, Framer Motion for animations. I care deeply about frontend performance, so tools like Lighthouse, Web Vitals monitoring, and bundle analysis are part of my daily workflow." },
      { speaker: "guest", text: "On the backend, Node.js and Express for API development. We work with both RESTful APIs and GraphQL depending on the use case. For data, PostgreSQL and Redis are workhorses. Docker and Kubernetes for containerization and orchestration. CI/CD pipelines with Jenkins and GitHub Actions. And of course, cloud infrastructure, primarily on Azure and GCP." },
      { speaker: "host", text: "That is a full stack in the truest sense. What skills do you think are underrated?" },
      { speaker: "guest", text: "System design thinking. A lot of developers focus on learning the next hot framework, but the ability to think about systems holistically, to understand trade-offs, to design for failure, that is what separates good developers from great ones. Also, communication skills. Being able to explain a technical decision to a non-technical stakeholder is incredibly valuable. And honestly, reading code. We spend far more time reading code than writing it, so being a thoughtful code reader and reviewer is an underappreciated skill." }
    ]
  },
  {
    id: 5,
    time: "18:00",
    seconds: 1080,
    title: "Career Advice",
    subtitle: "Wisdom for developers",
    duration: "3:30",
    content: [
      { speaker: "host", text: "What advice would you give to developers who want to get to where you are, building at this kind of scale?" },
      { speaker: "guest", text: "First, focus on fundamentals. Frameworks come and go, but understanding data structures, algorithms, networking, and operating systems, that foundation will serve you throughout your entire career. When you truly understand the fundamentals, learning any new framework becomes easy." },
      { speaker: "guest", text: "Second, build things. Not just tutorial projects, but real applications that solve real problems. Push them to production. Deal with the messy reality of monitoring, scaling, and maintaining software. That is where the real learning happens. Your portfolio should show not just what you built, but the decisions you made and the problems you solved." },
      { speaker: "guest", text: "Third, embrace code reviews. Both giving and receiving. I learned more from thoughtful code reviews than from any course or tutorial. It is this incredible feedback loop that makes everyone better. Do not just find bugs, suggest better patterns." },
      { speaker: "host", text: "Any thoughts on the importance of continuous learning?" },
      { speaker: "guest", text: "Absolutely critical. This industry moves fast. I set aside dedicated time every week to explore new technologies, read engineering blogs, and experiment with side projects. The engineers I admire most are the ones who never stop being curious. Stay hungry, stay humble, and always be learning." }
    ]
  },
  {
    id: 6,
    time: "21:30",
    seconds: 1290,
    title: "How to Reach Anshull",
    subtitle: "Connect & collaborate",
    duration: "1:30",
    content: [
      { speaker: "host", text: "For our listeners who want to connect with you, where can they find you?" },
      { speaker: "guest", text: "I am most active on LinkedIn, that is the best place to reach me for professional conversations. I am also on GitHub where I share some of my projects and open source contributions. And I am always open to connecting with fellow developers, whether you want to talk about system design, career advice, or just geek out about technology." },
      { speaker: "host", text: "And what kind of opportunities are you open to?" },
      { speaker: "guest", text: "I am always interested in hearing about challenging technical problems and teams that value engineering excellence. I am particularly drawn to roles where I can work at scale, have ownership over meaningful systems, and continue growing as an engineer. If you are building something interesting, I would love to hear about it." }
    ]
  },
  {
    id: 7,
    time: "23:00",
    seconds: 1380,
    title: "Outro",
    subtitle: "Wrapping up",
    duration: "1:00",
    content: [
      { speaker: "host", text: "Anshull, this has been an incredible conversation. Thank you so much for coming on the show and sharing your journey, your insights, and your advice." },
      { speaker: "guest", text: "Thank you for having me. This was a lot of fun, and I hope your listeners got something valuable out of it. Keep building, keep learning, and do not be afraid to tackle the hard problems." },
      { speaker: "host", text: "And that is a wrap on episode 47 of The Dev Talk. If you enjoyed this episode, make sure to subscribe, leave a review, and share it with a fellow developer. Until next time, keep shipping great software. Peace." }
    ]
  }
];

// Total duration in seconds
const TOTAL_DURATION = 1440; // 24 minutes

// ============================================================
// STATE
// ============================================================
let isPlaying = false;
let currentChapter = 0;
let currentContentIndex = 0;
let currentSentenceIndex = 0;
let elapsedSeconds = 0;
let speechRate = 1;
let volume = 0.8;
let speechSynth = window.speechSynthesis;
let currentUtterance = null;
let animationFrame = null;
let waveformBars = [];
let coverBars = [];
let transcriptOpen = false;
let progressInterval = null;
let voices = [];

// ============================================================
// INIT
// ============================================================
function init() {
  buildCoverWaveform();
  buildWaveformBars();
  buildChaptersList();
  buildTranscript();
  loadVoices();
  updatePlayerUI();

  // Load voices (some browsers need this async)
  if (speechSynth.onvoiceschanged !== undefined) {
    speechSynth.onvoiceschanged = loadVoices;
  }
}

function loadVoices() {
  voices = speechSynth.getVoices();
}

function getVoice(type) {
  // Try to find a good English voice
  const preferred = type === 'host'
    ? ['Google UK English Male', 'Daniel', 'Alex', 'Microsoft David', 'en-GB', 'en-US']
    : ['Google UK English Female', 'Samantha', 'Karen', 'Microsoft Zira', 'en-US', 'en-AU'];

  for (const name of preferred) {
    const found = voices.find(v => v.name.includes(name) || v.lang.includes(name));
    if (found) return found;
  }

  // Fallback to any English voice
  const english = voices.filter(v => v.lang.startsWith('en'));
  if (type === 'host') return english[0] || voices[0];
  return english[1] || english[0] || voices[0];
}

// ============================================================
// BUILD COVER WAVEFORM
// ============================================================
function buildCoverWaveform() {
  const container = document.getElementById('coverWaveform');
  for (let i = 0; i < 30; i++) {
    const bar = document.createElement('div');
    bar.className = 'bar';
    const h = 5 + Math.random() * 25;
    bar.style.height = h + 'px';
    container.appendChild(bar);
    coverBars.push(bar);
  }
}

// ============================================================
// BUILD MAIN WAVEFORM
// ============================================================
function buildWaveformBars() {
  const container = document.getElementById('waveformBars');
  const count = Math.floor(container.offsetWidth / 5) || 120;
  for (let i = 0; i < count; i++) {
    const bar = document.createElement('div');
    bar.className = 'bar';
    bar.style.height = '4px';
    container.appendChild(bar);
    waveformBars.push(bar);
  }
}

// ============================================================
// BUILD CHAPTERS
// ============================================================
function buildChaptersList() {
  const list = document.getElementById('chaptersList');
  CHAPTERS.forEach((ch, i) => {
    const item = document.createElement('div');
    item.className = 'chapter-item' + (i === 0 ? ' active' : '');
    item.id = 'chapter-' + i;
    item.onclick = () => jumpToChapter(i);
    item.innerHTML = `
      <div class="chapter-number">
        <span class="num">${i + 1}</span>
        <span class="eq-icon"><span></span><span></span><span></span></span>
      </div>
      <div class="chapter-info">
        <div class="chapter-title">${ch.title}</div>
        <div class="chapter-subtitle">${ch.subtitle}</div>
      </div>
      <div class="chapter-duration">${ch.duration}</div>
      <div class="chapter-time">${ch.time}</div>
    `;
    list.appendChild(item);
  });
}

// ============================================================
// BUILD TRANSCRIPT
// ============================================================
function buildTranscript() {
  const container = document.getElementById('transcriptInner');
  CHAPTERS.forEach((ch, chIdx) => {
    // Chapter header in transcript
    const header = document.createElement('div');
    header.style.cssText = 'padding: 16px 16px 8px; margin-top: 16px;';
    header.innerHTML = `
      <span style="font-family: var(--font-mono); font-size: 11px; color: var(--orange); letter-spacing: 1px; text-transform: uppercase;">
        Chapter ${chIdx + 1}
      </span>
      <div style="font-family: var(--font-display); font-size: 18px; font-weight: 700; margin-top: 4px;">
        ${ch.title}
      </div>
    `;
    container.appendChild(header);

    ch.content.forEach((entry, entryIdx) => {
      const div = document.createElement('div');
      div.className = 'transcript-entry';
      div.id = `transcript-${chIdx}-${entryIdx}`;
      div.setAttribute('data-chapter', chIdx);
      div.setAttribute('data-entry', entryIdx);
      div.onclick = () => jumpToContent(chIdx, entryIdx);

      const speakerName = entry.speaker === 'host' ? 'Host' : 'Anshull Garg';
      const speakerClass = entry.speaker === 'host' ? 'host' : 'guest';

      div.innerHTML = `
        <div class="transcript-timestamp">${ch.time}</div>
        <div class="${speakerClass}">
          <div class="transcript-speaker">${speakerName}</div>
          <div class="transcript-text">${entry.text}</div>
        </div>
      `;
      container.appendChild(div);
    });
  });
}

// ============================================================
// TOGGLE TRANSCRIPT
// ============================================================
function toggleTranscript() {
  const body = document.getElementById('transcriptBody');
  const toggle = document.getElementById('transcriptToggle');
  const chevron = document.getElementById('transcriptChevron');
  transcriptOpen = !transcriptOpen;

  if (transcriptOpen) {
    body.classList.add('open');
    toggle.classList.add('open');
  } else {
    body.classList.remove('open');
    toggle.classList.remove('open');
  }
}

// ============================================================
// PLAYBACK CONTROLS
// ============================================================
function togglePlayback() {
  if (isPlaying) {
    pausePlayback();
  } else {
    startPlayback();
  }
}

function startPlayback() {
  isPlaying = true;
  updatePlayButtons(true);
  updateLiveIndicator(true);
  document.getElementById('waveformBars').classList.add('active');
  showSpeakingContent();
  speakCurrentContent();
  startProgressTimer();
  animateWaveform();
}

function pausePlayback() {
  isPlaying = false;
  speechSynth.cancel();
  updatePlayButtons(false);
  updateLiveIndicator(false);
  document.getElementById('waveformBars').classList.remove('active');
  stopProgressTimer();
  if (animationFrame) cancelAnimationFrame(animationFrame);
}

function updatePlayButtons(playing) {
  const heroIcon = document.getElementById('heroPlayIcon');
  const heroText = document.getElementById('heroPlayText');
  const playerIcon = document.getElementById('playerPlayIcon');

  if (playing) {
    heroIcon.innerHTML = '<rect x="5" y="3" width="4" height="18"/><rect x="15" y="3" width="4" height="18"/>';
    heroText.textContent = 'Pause';
    playerIcon.innerHTML = '<rect x="5" y="3" width="4" height="18"/><rect x="15" y="3" width="4" height="18"/>';
  } else {
    heroIcon.innerHTML = '<polygon points="6,3 20,12 6,21"/>';
    heroText.textContent = 'Play Episode';
    playerIcon.innerHTML = '<polygon points="6,3 20,12 6,21"/>';
  }
}

function updateLiveIndicator(active) {
  const indicator = document.getElementById('liveIndicator');
  const text = document.getElementById('liveText');
  if (active) {
    indicator.classList.remove('inactive');
    text.textContent = 'Speaking';
  } else {
    indicator.classList.add('inactive');
    text.textContent = 'Paused';
  }
}

// ============================================================
// SPEECH SYNTHESIS
// ============================================================
function speakCurrentContent() {
  if (!isPlaying) return;

  const chapter = CHAPTERS[currentChapter];
  if (!chapter) {
    // End of episode
    pausePlayback();
    return;
  }

  if (currentContentIndex >= chapter.content.length) {
    // Move to next chapter
    currentChapter++;
    currentContentIndex = 0;
    if (currentChapter >= CHAPTERS.length) {
      pausePlayback();
      elapsedSeconds = TOTAL_DURATION;
      updateProgress();
      return;
    }
    updateActiveChapter();
    showSpeakingContent();
    speakCurrentContent();
    return;
  }

  const entry = chapter.content[currentContentIndex];
  const text = entry.text;

  // Highlight current transcript entry
  highlightTranscriptEntry(currentChapter, currentContentIndex);

  // Update speaking content display
  updateSpeakingText();

  // Create utterance
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.rate = speechRate;
  utterance.volume = volume;
  utterance.pitch = entry.speaker === 'host' ? 1.0 : 0.95;

  const voice = getVoice(entry.speaker);
  if (voice) utterance.voice = voice;

  utterance.onend = () => {
    if (!isPlaying) return;
    currentContentIndex++;
    speakCurrentContent();
  };

  utterance.onboundary = (event) => {
    if (event.name === 'word') {
      // Could highlight individual words here
    }
  };

  currentUtterance = utterance;
  speechSynth.speak(utterance);
}

// ============================================================
// SPEAKING CONTENT DISPLAY
// ============================================================
function showSpeakingContent() {
  const el = document.getElementById('speakingContent');
  el.classList.add('visible');
  const chapter = CHAPTERS[currentChapter];
  if (!chapter) return;
  document.getElementById('speakingTitle').textContent = chapter.title;
  document.getElementById('speakingSub').textContent = `Chapter ${currentChapter + 1} of ${CHAPTERS.length}`;
  updateSpeakingText();
}

function updateSpeakingText() {
  const container = document.getElementById('speakingText');
  const chapter = CHAPTERS[currentChapter];
  if (!chapter) return;

  let html = '';
  chapter.content.forEach((entry, i) => {
    const speakerLabel = entry.speaker === 'host' ? 'Host' : 'Anshull';
    const cls = i < currentContentIndex ? 'spoken' : (i === currentContentIndex ? 'current-sentence' : '');
    const speakerColor = entry.speaker === 'host' ? 'var(--purple-light)' : 'var(--orange)';
    html += `<p style="margin-bottom: 12px;" class="${cls}"><strong style="color: ${speakerColor}">${speakerLabel}:</strong> ${entry.text}</p>`;
  });
  container.innerHTML = html;
}

// ============================================================
// TRANSCRIPT HIGHLIGHTING
// ============================================================
function highlightTranscriptEntry(chIdx, entryIdx) {
  // Remove all active
  document.querySelectorAll('.transcript-entry.active').forEach(el => el.classList.remove('active'));

  const el = document.getElementById(`transcript-${chIdx}-${entryIdx}`);
  if (el) {
    el.classList.add('active');
    if (transcriptOpen) {
      el.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  }
}

// ============================================================
// CHAPTER NAVIGATION
// ============================================================
function jumpToChapter(index) {
  speechSynth.cancel();
  currentChapter = index;
  currentContentIndex = 0;
  elapsedSeconds = CHAPTERS[index].seconds;
  updateActiveChapter();
  updateProgress();
  showSpeakingContent();

  if (isPlaying) {
    speakCurrentContent();
  } else {
    startPlayback();
  }
}

function jumpToContent(chIdx, entryIdx) {
  speechSynth.cancel();
  currentChapter = chIdx;
  currentContentIndex = entryIdx;
  elapsedSeconds = CHAPTERS[chIdx].seconds;
  updateActiveChapter();
  updateProgress();
  showSpeakingContent();

  if (isPlaying) {
    speakCurrentContent();
  } else {
    startPlayback();
  }
}

function updateActiveChapter() {
  document.querySelectorAll('.chapter-item').forEach((el, i) => {
    if (i === currentChapter) {
      el.classList.add('active');
    } else {
      el.classList.remove('active');
    }
  });

  // Update player chapter indicator
  const indicator = document.getElementById('playerChapterIndicator');
  if (CHAPTERS[currentChapter]) {
    indicator.innerHTML = `<span class="ch-label">Ch ${currentChapter + 1}:</span> ${CHAPTERS[currentChapter].title}`;
  }
}

// ============================================================
// SKIP FORWARD / BACKWARD
// ============================================================
function skipForward() {
  // Find next chapter or move forward
  const nextChapter = currentChapter + 1;
  if (nextChapter < CHAPTERS.length) {
    jumpToChapter(nextChapter);
  }
}

function skipBackward() {
  // Go to previous chapter or restart current
  if (currentContentIndex > 0) {
    jumpToChapter(currentChapter);
  } else if (currentChapter > 0) {
    jumpToChapter(currentChapter - 1);
  } else {
    jumpToChapter(0);
  }
}

// ============================================================
// SPEED CONTROL
// ============================================================
const SPEEDS = [0.5, 0.75, 1, 1.25, 1.5, 2];
let speedIndex = 2; // 1x

function cycleSpeed() {
  speedIndex = (speedIndex + 1) % SPEEDS.length;
  speechRate = SPEEDS[speedIndex];
  document.getElementById('speedBtn').textContent = SPEEDS[speedIndex] + 'x';

  // If currently speaking, restart with new speed
  if (isPlaying) {
    speechSynth.cancel();
    speakCurrentContent();
  }
}

// ============================================================
// VOLUME CONTROL
// ============================================================
function setVolume(val) {
  volume = parseFloat(val);
}

// ============================================================
// PROGRESS BAR
// ============================================================
function startProgressTimer() {
  stopProgressTimer();
  progressInterval = setInterval(() => {
    if (isPlaying && elapsedSeconds < TOTAL_DURATION) {
      elapsedSeconds += 1;
      updateProgress();

      // Check if we should advance to next chapter based on time
      // (The speech engine handles actual chapter transitions,
      //  but this keeps the timer visually accurate)
    }
  }, 1000);
}

function stopProgressTimer() {
  if (progressInterval) {
    clearInterval(progressInterval);
    progressInterval = null;
  }
}

function updateProgress() {
  const pct = (elapsedSeconds / TOTAL_DURATION) * 100;
  document.getElementById('playerProgressFill').style.width = pct + '%';
  document.getElementById('timeElapsed').textContent = formatTime(elapsedSeconds);
  document.getElementById('waveformStatus').textContent = formatTime(elapsedSeconds) + ' / ' + formatTime(TOTAL_DURATION);
}

function formatTime(seconds) {
  const m = Math.floor(seconds / 60);
  const s = Math.floor(seconds % 60);
  return m + ':' + (s < 10 ? '0' : '') + s;
}

function seekToPosition(event) {
  const bar = document.getElementById('playerProgressBar');
  const rect = bar.getBoundingClientRect();
  const pct = (event.clientX - rect.left) / rect.width;
  const targetSeconds = Math.floor(pct * TOTAL_DURATION);

  // Find the correct chapter for this time
  let targetChapter = 0;
  for (let i = CHAPTERS.length - 1; i >= 0; i--) {
    if (targetSeconds >= CHAPTERS[i].seconds) {
      targetChapter = i;
      break;
    }
  }

  elapsedSeconds = targetSeconds;
  jumpToChapter(targetChapter);
}

// ============================================================
// WAVEFORM ANIMATION
// ============================================================
function animateWaveform() {
  if (!isPlaying) return;

  // Main waveform
  waveformBars.forEach((bar, i) => {
    const base = 4;
    const range = 60;
    const t = Date.now() / 1000;
    const h = base + Math.abs(Math.sin(t * 3 + i * 0.3) * Math.sin(t * 1.7 + i * 0.5)) * range * (0.3 + Math.random() * 0.7);
    bar.style.height = h + 'px';
    const intensity = h / (base + range);
    bar.style.background = `linear-gradient(180deg, var(--orange) ${intensity * 100}%, var(--purple))`;
  });

  // Cover waveform
  coverBars.forEach((bar, i) => {
    const t = Date.now() / 1000;
    const h = 5 + Math.abs(Math.sin(t * 2.5 + i * 0.4)) * 30;
    bar.style.height = h + 'px';
  });

  animationFrame = requestAnimationFrame(animateWaveform);
}

// Idle waveform animation (subtle)
function animateIdleWaveform() {
  if (isPlaying) return;

  waveformBars.forEach((bar, i) => {
    const t = Date.now() / 1000;
    const h = 4 + Math.abs(Math.sin(t * 0.5 + i * 0.2)) * 8;
    bar.style.height = h + 'px';
  });

  requestAnimationFrame(animateIdleWaveform);
}

// ============================================================
// PLAYER UI
// ============================================================
function updatePlayerUI() {
  updateProgress();
  updateActiveChapter();
  animateIdleWaveform();
}

// ============================================================
// KEYBOARD SHORTCUTS
// ============================================================
document.addEventListener('keydown', (e) => {
  if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;

  switch (e.code) {
    case 'Space':
      e.preventDefault();
      togglePlayback();
      break;
    case 'ArrowRight':
      skipForward();
      break;
    case 'ArrowLeft':
      skipBackward();
      break;
    case 'KeyT':
      toggleTranscript();
      break;
  }
});

// ============================================================
// INTERSECTION OBSERVER for fade-in
// ============================================================
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('fade-in');
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.1 });

// ============================================================
// INIT
// ============================================================
document.addEventListener('DOMContentLoaded', () => {
  init();

  // Observe sections for animation
  document.querySelectorAll('.section, .guest-card, .links-mentioned, .related-episodes').forEach(el => {
    el.style.opacity = '0';
    observer.observe(el);
  });
});

// Chrome workaround: keep speech synthesis alive
setInterval(() => {
  if (isPlaying && speechSynth.speaking) {
    speechSynth.pause();
    speechSynth.resume();
  }
}, 10000);
</script>

</body>
</html>
