<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ANSHULL GARG | Software Developer | Imposter Syndrome</title>
<meta name="description" content="Anshull Garg - Software Developer at Walmart. A portfolio that starts with imposter syndrome and scrolls into undeniable confidence.">

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600;700;800&family=Caveat:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
/* ========================================================================
   CSS CUSTOM PROPERTIES
   ======================================================================== */
:root {
  /* The Journey Colors */
  --doubt-gray: #6B7280;
  --doubt-gray-light: #9CA3AF;
  --doubt-gray-dark: #4B5563;
  --doubt-bg: #F3F4F6;
  --doubt-surface: #E5E7EB;

  --emerging-blue: #3B82F6;
  --emerging-blue-light: #60A5FA;
  --emerging-blue-dark: #2563EB;

  --triumph-gold: #F59E0B;
  --triumph-gold-light: #FBBF24;
  --triumph-gold-dark: #D97706;

  /* Neutral */
  --text-dark: #111827;
  --text-medium: #374151;
  --text-light: #6B7280;
  --white: #FFFFFF;
  --black: #000000;

  /* Fonts */
  --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-display: 'Space Grotesk', sans-serif;
  --font-code: 'JetBrains Mono', monospace;
  --font-hand: 'Caveat', cursive;

  /* Dynamic properties driven by scroll */
  --confidence: 0;
  --saturation: 0;
  --font-scale: 0.7;
  --bg-hue: 220;
  --bg-saturation: 5%;
  --bg-lightness: 96%;
}

/* ========================================================================
   RESET & BASE
   ======================================================================== */
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--font-body);
  overflow-x: hidden;
  line-height: 1.7;
  background: hsl(var(--bg-hue), var(--bg-saturation), var(--bg-lightness));
  color: var(--doubt-gray);
  transition: background 0.3s ease;
}

::selection {
  background: rgba(59, 130, 246, 0.2);
  color: var(--text-dark);
}

a { text-decoration: none; color: inherit; }
button { cursor: pointer; border: none; background: none; font-family: inherit; }

/* ========================================================================
   PREFERS-REDUCED-MOTION
   ======================================================================== */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  html { scroll-behavior: auto; }
}

/* ========================================================================
   CONFIDENCE METER (fixed sidebar)
   ======================================================================== */
.confidence-meter {
  position: fixed;
  right: 24px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 100;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.confidence-meter__label {
  font-family: var(--font-code);
  font-size: 9px;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--doubt-gray-light);
  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);
  transition: color 0.5s ease;
}

.confidence-meter__track {
  width: 4px;
  height: 200px;
  background: var(--doubt-surface);
  border-radius: 4px;
  overflow: hidden;
  position: relative;
}

.confidence-meter__fill {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 0%;
  border-radius: 4px;
  background: var(--doubt-gray-light);
  transition: height 0.4s ease, background 0.6s ease;
}

.confidence-meter__value {
  font-family: var(--font-code);
  font-size: 11px;
  font-weight: 600;
  color: var(--doubt-gray-light);
  transition: color 0.5s ease;
}

/* Confidence meter states */
body[data-phase="emerging"] .confidence-meter__fill {
  background: var(--emerging-blue);
}
body[data-phase="confident"] .confidence-meter__fill {
  background: var(--emerging-blue);
}
body[data-phase="triumphant"] .confidence-meter__fill {
  background: linear-gradient(to top, var(--emerging-blue), var(--triumph-gold));
}

body[data-phase="confident"] .confidence-meter__label,
body[data-phase="confident"] .confidence-meter__value {
  color: var(--emerging-blue);
}
body[data-phase="triumphant"] .confidence-meter__label,
body[data-phase="triumphant"] .confidence-meter__value {
  color: var(--triumph-gold);
}

/* ========================================================================
   SCROLL PROGRESS BAR
   ======================================================================== */
.scroll-progress {
  position: fixed;
  top: 0;
  left: 0;
  width: 0%;
  height: 2px;
  background: var(--doubt-gray-light);
  z-index: 1000;
  transition: background 0.5s ease;
}

body[data-phase="emerging"] .scroll-progress { background: var(--emerging-blue-light); }
body[data-phase="confident"] .scroll-progress { background: var(--emerging-blue); }
body[data-phase="triumphant"] .scroll-progress { background: var(--triumph-gold); }

/* ========================================================================
   SECTION COMMON
   ======================================================================== */
.section {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 80px 24px;
  position: relative;
  overflow: hidden;
}

.section__inner {
  max-width: 900px;
  width: 100%;
  position: relative;
  z-index: 2;
}

/* ========================================================================
   SECTION 1: "I'm probably not that special..."
   ======================================================================== */
.section--doubt {
  min-height: 100vh;
  background: #F3F4F6;
}

.section--doubt .section__inner {
  text-align: center;
}

.doubt-name {
  font-family: var(--font-body);
  font-size: 12px;
  font-weight: 400;
  letter-spacing: 0.05em;
  color: var(--doubt-gray-light);
  margin-bottom: 40px;
  opacity: 0.6;
}

.doubt-headline {
  font-family: var(--font-body);
  font-size: clamp(14px, 2vw, 18px);
  font-weight: 300;
  color: var(--doubt-gray);
  line-height: 1.8;
  margin-bottom: 60px;
}

.doubt-headline em {
  font-style: italic;
  color: var(--doubt-gray-light);
}

.doubt-claims {
  display: flex;
  flex-direction: column;
  gap: 16px;
  align-items: center;
}

.doubt-claim {
  font-family: var(--font-body);
  font-size: 13px;
  font-weight: 300;
  color: var(--doubt-gray-light);
  padding: 8px 20px;
  border: 1px dashed #D1D5DB;
  border-radius: 4px;
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}

.doubt-claim.visible {
  opacity: 0.7;
  transform: translateY(0);
}

.doubt-asterisk {
  font-family: var(--font-hand);
  font-size: 14px;
  color: var(--doubt-gray-light);
  margin-top: 40px;
  opacity: 0.4;
}

/* Floating self-doubt whispers */
.whisper {
  position: absolute;
  font-family: var(--font-hand);
  font-size: 14px;
  color: var(--doubt-gray-light);
  opacity: 0;
  animation: whisperFloat 8s ease-in-out infinite;
  pointer-events: none;
}

.whisper:nth-child(1) { top: 15%; left: 8%; animation-delay: 0s; }
.whisper:nth-child(2) { top: 25%; right: 10%; animation-delay: 2s; }
.whisper:nth-child(3) { bottom: 30%; left: 12%; animation-delay: 4s; }
.whisper:nth-child(4) { bottom: 20%; right: 8%; animation-delay: 6s; }
.whisper:nth-child(5) { top: 40%; left: 5%; animation-delay: 1s; }
.whisper:nth-child(6) { top: 60%; right: 5%; animation-delay: 3s; }

@keyframes whisperFloat {
  0%, 100% { opacity: 0; transform: translateY(0); }
  20%, 80% { opacity: 0.3; }
  50% { opacity: 0.5; transform: translateY(-10px); }
}

/* ========================================================================
   SECTION 2: "Well, I guess I know a few things..."
   ======================================================================== */
.section--hesitant {
  background: #EBEDF0;
}

.hesitant-header {
  font-family: var(--font-display);
  font-size: clamp(16px, 2.5vw, 22px);
  font-weight: 400;
  color: var(--doubt-gray);
  margin-bottom: 12px;
  text-align: center;
}

.hesitant-sub {
  font-family: var(--font-hand);
  font-size: 16px;
  color: var(--doubt-gray-light);
  text-align: center;
  margin-bottom: 48px;
}

.skills-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 40px;
}

.skill-item {
  padding: 16px 20px;
  background: rgba(255, 255, 255, 0.5);
  border: 1px solid #D1D5DB;
  border-radius: 6px;
  position: relative;
  overflow: hidden;
  transition: all 0.6s ease;
}

.skill-item__name {
  font-family: var(--font-code);
  font-size: 13px;
  font-weight: 500;
  color: var(--doubt-gray);
  position: relative;
  display: inline-block;
}

/* Strikethrough that un-strikes */
.skill-item__name::after {
  content: '';
  position: absolute;
  left: -4px;
  right: -4px;
  top: 50%;
  height: 1.5px;
  background: var(--doubt-gray-light);
  transform: scaleX(1);
  transform-origin: left;
  transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.skill-item.unstruck .skill-item__name::after {
  transform: scaleX(0);
  transform-origin: right;
}

.skill-item.unstruck {
  border-color: var(--emerging-blue-light);
  background: rgba(59, 130, 246, 0.04);
}

.skill-item.unstruck .skill-item__name {
  color: var(--text-dark);
}

.skill-item__doubt {
  font-family: var(--font-hand);
  font-size: 12px;
  color: var(--doubt-gray-light);
  margin-top: 4px;
  transition: opacity 0.5s ease;
}

.skill-item.unstruck .skill-item__doubt {
  opacity: 0;
}

.skill-item__confidence {
  font-family: var(--font-code);
  font-size: 11px;
  color: var(--emerging-blue);
  margin-top: 4px;
  opacity: 0;
  transform: translateY(5px);
  transition: opacity 0.5s ease 0.3s, transform 0.5s ease 0.3s;
}

.skill-item.unstruck .skill-item__confidence {
  opacity: 1;
  transform: translateY(0);
}

.hesitant-footnote {
  font-family: var(--font-hand);
  font-size: 15px;
  color: var(--doubt-gray-light);
  text-align: center;
  opacity: 0.5;
  transition: opacity 0.5s ease;
}

/* ========================================================================
   SECTION 3: "Actually, now that I think about it..."
   ======================================================================== */
.section--emerging {
  background: linear-gradient(180deg, #EBEDF0 0%, #EBF2FF 100%);
}

.emerging-header {
  font-family: var(--font-display);
  font-size: clamp(20px, 3vw, 28px);
  font-weight: 500;
  color: var(--text-medium);
  text-align: center;
  margin-bottom: 16px;
}

.emerging-sub {
  font-family: var(--font-body);
  font-size: 15px;
  color: var(--doubt-gray);
  text-align: center;
  margin-bottom: 56px;
  line-height: 1.8;
}

.emerging-sub .reframe {
  display: inline;
  position: relative;
}

.emerging-sub .reframe__old {
  color: var(--doubt-gray-light);
  text-decoration: line-through;
  transition: opacity 0.5s ease;
}

.emerging-sub .reframe__new {
  color: var(--emerging-blue);
  font-weight: 500;
  opacity: 0;
  transition: opacity 0.5s ease 0.3s;
}

.section--emerging.active .reframe__old {
  opacity: 0.4;
}

.section--emerging.active .reframe__new {
  opacity: 1;
}

.realization-cards {
  display: grid;
  grid-template-columns: 1fr;
  gap: 24px;
}

.realization-card {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 20px;
  padding: 28px 32px;
  background: var(--white);
  border-radius: 12px;
  border-left: 3px solid transparent;
  box-shadow: 0 1px 3px rgba(0,0,0,0.04);
  opacity: 0;
  transform: translateX(-20px);
  transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
}

.realization-card.visible {
  opacity: 1;
  transform: translateX(0);
  border-left-color: var(--emerging-blue);
}

.realization-card__icon {
  width: 44px;
  height: 44px;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(59, 130, 246, 0.16));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}

.realization-card__before {
  font-family: var(--font-body);
  font-size: 13px;
  color: var(--doubt-gray-light);
  text-decoration: line-through;
  margin-bottom: 4px;
}

.realization-card__after {
  font-family: var(--font-display);
  font-size: 16px;
  font-weight: 600;
  color: var(--text-dark);
}

.realization-card__detail {
  font-family: var(--font-body);
  font-size: 13px;
  color: var(--text-light);
  margin-top: 6px;
  line-height: 1.6;
}

/* ========================================================================
   SECTION 4: "OK fine, here's what I've actually done"
   ======================================================================== */
.section--confident {
  background: linear-gradient(180deg, #EBF2FF 0%, #E8EDFF 50%, #F0F4FF 100%);
}

.confident-header {
  font-family: var(--font-display);
  font-size: clamp(28px, 4vw, 40px);
  font-weight: 700;
  color: var(--text-dark);
  text-align: center;
  margin-bottom: 8px;
}

.confident-sub {
  font-family: var(--font-body);
  font-size: 16px;
  color: var(--text-medium);
  text-align: center;
  margin-bottom: 56px;
}

.metrics-row {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-bottom: 48px;
}

.metric-card {
  text-align: center;
  padding: 32px 20px;
  background: var(--white);
  border-radius: 16px;
  box-shadow: 0 4px 24px rgba(59, 130, 246, 0.08);
  border: 1px solid rgba(59, 130, 246, 0.1);
  opacity: 0;
  transform: translateY(30px) scale(0.95);
  transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.metric-card.visible {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.metric-card__number {
  font-family: var(--font-display);
  font-size: clamp(32px, 5vw, 48px);
  font-weight: 800;
  background: linear-gradient(135deg, var(--emerging-blue), var(--emerging-blue-dark));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1.1;
}

.metric-card__label {
  font-family: var(--font-body);
  font-size: 13px;
  color: var(--text-light);
  margin-top: 8px;
  line-height: 1.4;
}

.projects-showcase {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
}

.project-card {
  padding: 32px;
  background: var(--white);
  border-radius: 16px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.04);
  border: 1px solid rgba(59, 130, 246, 0.08);
  position: relative;
  overflow: hidden;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s ease;
}

.project-card.visible {
  opacity: 1;
  transform: translateY(0);
}

.project-card:hover {
  box-shadow: 0 8px 32px rgba(59, 130, 246, 0.12);
  transform: translateY(-2px);
}

.project-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--emerging-blue), var(--emerging-blue-light));
  opacity: 0;
  transition: opacity 0.3s ease;
}

.project-card:hover::before {
  opacity: 1;
}

.project-card__tag {
  display: inline-block;
  font-family: var(--font-code);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--emerging-blue);
  background: rgba(59, 130, 246, 0.08);
  padding: 4px 10px;
  border-radius: 4px;
  margin-bottom: 12px;
}

.project-card__title {
  font-family: var(--font-display);
  font-size: 18px;
  font-weight: 700;
  color: var(--text-dark);
  margin-bottom: 8px;
}

.project-card__desc {
  font-family: var(--font-body);
  font-size: 14px;
  color: var(--text-light);
  line-height: 1.6;
  margin-bottom: 16px;
}

.project-card__impact {
  font-family: var(--font-code);
  font-size: 12px;
  font-weight: 600;
  color: var(--emerging-blue-dark);
  padding: 8px 12px;
  background: rgba(59, 130, 246, 0.05);
  border-radius: 6px;
  border-left: 2px solid var(--emerging-blue);
}

.project-card__stack {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 12px;
}

.project-card__stack span {
  font-family: var(--font-code);
  font-size: 10px;
  color: var(--text-light);
  background: #F3F4F6;
  padding: 3px 8px;
  border-radius: 3px;
}

/* ========================================================================
   SECTION 5: "Yeah, I'm pretty good at this."
   ======================================================================== */
.section--triumphant {
  background: linear-gradient(180deg, #F0F4FF 0%, #FFFBEB 40%, #FEF3C7 100%);
  position: relative;
}

.section--triumphant::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse at 20% 50%, rgba(245, 158, 11, 0.08) 0%, transparent 60%),
    radial-gradient(ellipse at 80% 30%, rgba(59, 130, 246, 0.06) 0%, transparent 60%);
  pointer-events: none;
}

.triumphant-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 24px;
}

.triumphant-badge__line {
  width: 40px;
  height: 1px;
  background: var(--triumph-gold);
}

.triumphant-badge__text {
  font-family: var(--font-code);
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--triumph-gold-dark);
}

.triumphant-name {
  font-family: var(--font-display);
  font-size: clamp(40px, 6vw, 64px);
  font-weight: 800;
  text-align: center;
  line-height: 1.1;
  margin-bottom: 8px;
  background: linear-gradient(135deg, var(--text-dark) 0%, var(--emerging-blue-dark) 50%, var(--triumph-gold-dark) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.triumphant-name.visible {
  opacity: 1;
  transform: translateY(0);
}

.triumphant-title {
  font-family: var(--font-display);
  font-size: clamp(18px, 3vw, 26px);
  font-weight: 600;
  color: var(--text-dark);
  text-align: center;
  margin-bottom: 4px;
  opacity: 0;
  transform: translateY(15px);
  transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1) 0.15s;
}

.triumphant-title.visible {
  opacity: 1;
  transform: translateY(0);
}

.triumphant-company {
  font-family: var(--font-body);
  font-size: 15px;
  color: var(--triumph-gold-dark);
  text-align: center;
  font-weight: 500;
  margin-bottom: 48px;
  opacity: 0;
  transition: opacity 0.7s ease 0.3s;
}

.triumphant-company.visible {
  opacity: 1;
}

/* The confidence statement */
.confidence-statement {
  text-align: center;
  max-width: 640px;
  margin: 0 auto 56px;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.8s ease 0.4s;
}

.confidence-statement.visible {
  opacity: 1;
  transform: translateY(0);
}

.confidence-statement p {
  font-family: var(--font-body);
  font-size: 16px;
  color: var(--text-medium);
  line-height: 1.9;
}

.confidence-statement strong {
  color: var(--text-dark);
  font-weight: 600;
}

/* Achievement ticker */
.achievement-ticker {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin-bottom: 56px;
  opacity: 0;
  transition: opacity 0.8s ease 0.5s;
}

.achievement-ticker.visible {
  opacity: 1;
}

.achievement-pill {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: var(--white);
  border-radius: 100px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  border: 1px solid rgba(245, 158, 11, 0.15);
  font-family: var(--font-code);
  font-size: 12px;
  font-weight: 500;
  color: var(--text-medium);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.achievement-pill:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(245, 158, 11, 0.12);
}

.achievement-pill__icon {
  font-size: 14px;
}

/* CTA Section */
.triumphant-cta {
  text-align: center;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.8s ease 0.6s;
}

.triumphant-cta.visible {
  opacity: 1;
  transform: translateY(0);
}

.triumphant-cta__text {
  font-family: var(--font-display);
  font-size: clamp(20px, 3vw, 28px);
  font-weight: 600;
  color: var(--text-dark);
  margin-bottom: 24px;
}

.cta-buttons {
  display: flex;
  justify-content: center;
  gap: 16px;
  flex-wrap: wrap;
}

.cta-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 14px 32px;
  border-radius: 10px;
  font-family: var(--font-display);
  font-size: 15px;
  font-weight: 600;
  transition: all 0.3s ease;
}

.cta-btn--primary {
  background: linear-gradient(135deg, var(--emerging-blue), var(--emerging-blue-dark));
  color: var(--white);
  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
}

.cta-btn--primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4);
}

.cta-btn--secondary {
  background: var(--white);
  color: var(--text-dark);
  border: 2px solid var(--triumph-gold);
  box-shadow: 0 2px 8px rgba(245, 158, 11, 0.15);
}

.cta-btn--secondary:hover {
  background: #FFFBEB;
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(245, 158, 11, 0.25);
}

/* Social links */
.social-links {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-top: 32px;
}

.social-link {
  font-family: var(--font-code);
  font-size: 13px;
  color: var(--text-light);
  padding: 8px 16px;
  border-radius: 6px;
  transition: all 0.3s ease;
  position: relative;
}

.social-link::after {
  content: '';
  position: absolute;
  bottom: 4px;
  left: 16px;
  right: 16px;
  height: 1px;
  background: var(--emerging-blue);
  transform: scaleX(0);
  transition: transform 0.3s ease;
}

.social-link:hover {
  color: var(--emerging-blue);
}

.social-link:hover::after {
  transform: scaleX(1);
}

/* ========================================================================
   THE JOURNEY NARRATOR (scroll-triggered text)
   ======================================================================== */
.narrator {
  position: fixed;
  bottom: 24px;
  left: 24px;
  z-index: 100;
  max-width: 280px;
  pointer-events: none;
}

.narrator__bubble {
  font-family: var(--font-hand);
  font-size: 15px;
  color: var(--doubt-gray);
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  padding: 12px 18px;
  border-radius: 12px;
  border: 1px solid rgba(0, 0, 0, 0.06);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
  opacity: 0;
  transform: translateY(10px);
  transition: all 0.5s ease;
}

.narrator__bubble.show {
  opacity: 1;
  transform: translateY(0);
}

body[data-phase="emerging"] .narrator__bubble {
  color: var(--emerging-blue-dark);
  border-color: rgba(59, 130, 246, 0.1);
}

body[data-phase="confident"] .narrator__bubble {
  color: var(--emerging-blue-dark);
  border-color: rgba(59, 130, 246, 0.15);
}

body[data-phase="triumphant"] .narrator__bubble {
  color: var(--triumph-gold-dark);
  border-color: rgba(245, 158, 11, 0.15);
}

/* ========================================================================
   PARALLAX BACKGROUND ELEMENTS
   ======================================================================== */
.bg-shapes {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}

.bg-shape {
  position: absolute;
  border-radius: 50%;
  opacity: 0;
  transition: opacity 1s ease, background 1s ease;
}

.bg-shape--1 {
  width: 400px;
  height: 400px;
  top: -100px;
  right: -100px;
  background: radial-gradient(circle, rgba(107, 114, 128, 0.05) 0%, transparent 70%);
}

.bg-shape--2 {
  width: 300px;
  height: 300px;
  bottom: -50px;
  left: -80px;
  background: radial-gradient(circle, rgba(107, 114, 128, 0.04) 0%, transparent 70%);
}

.bg-shape--3 {
  width: 500px;
  height: 500px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: radial-gradient(circle, rgba(59, 130, 246, 0.03) 0%, transparent 70%);
}

body[data-phase="doubt"] .bg-shape { opacity: 0.5; }
body[data-phase="hesitant"] .bg-shape { opacity: 0.6; }
body[data-phase="emerging"] .bg-shape { opacity: 0.8; }
body[data-phase="confident"] .bg-shape { opacity: 1; }
body[data-phase="triumphant"] .bg-shape { opacity: 1; }

body[data-phase="emerging"] .bg-shape--1 {
  background: radial-gradient(circle, rgba(59, 130, 246, 0.06) 0%, transparent 70%);
}

body[data-phase="confident"] .bg-shape--1 {
  background: radial-gradient(circle, rgba(59, 130, 246, 0.08) 0%, transparent 70%);
}

body[data-phase="triumphant"] .bg-shape--1 {
  background: radial-gradient(circle, rgba(245, 158, 11, 0.08) 0%, transparent 70%);
}

body[data-phase="triumphant"] .bg-shape--2 {
  background: radial-gradient(circle, rgba(59, 130, 246, 0.06) 0%, transparent 70%);
}

body[data-phase="triumphant"] .bg-shape--3 {
  background: radial-gradient(circle, rgba(245, 158, 11, 0.05) 0%, transparent 70%);
}

/* ========================================================================
   TRANSITION DIVIDERS
   ======================================================================== */
.divider {
  padding: 60px 24px;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.divider__text {
  font-family: var(--font-hand);
  font-size: clamp(18px, 3vw, 24px);
  line-height: 1.6;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.8s ease;
}

.divider__text.visible {
  opacity: 1;
  transform: translateY(0);
}

.divider--1 { background: #EDEEF1; }
.divider--1 .divider__text { color: var(--doubt-gray); }

.divider--2 { background: linear-gradient(90deg, #EBEDF0, #EBF0FF); }
.divider--2 .divider__text { color: var(--text-medium); }

.divider--3 { background: linear-gradient(90deg, #EBF2FF, #EFF6FF); }
.divider--3 .divider__text { color: var(--emerging-blue-dark); font-weight: 500; }

.divider--4 { background: linear-gradient(90deg, #F0F4FF, #FFFBEB); }
.divider--4 .divider__text {
  font-family: var(--font-display);
  color: var(--text-dark);
  font-weight: 600;
}

/* Scroll-down hint for section 1 */
.scroll-hint {
  position: absolute;
  bottom: 32px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  animation: scrollBounce 2s ease-in-out infinite;
}

.scroll-hint__text {
  font-family: var(--font-code);
  font-size: 10px;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--doubt-gray-light);
}

.scroll-hint__arrow {
  width: 16px;
  height: 16px;
  border-right: 1.5px solid var(--doubt-gray-light);
  border-bottom: 1.5px solid var(--doubt-gray-light);
  transform: rotate(45deg);
}

@keyframes scrollBounce {
  0%, 100% { transform: translateX(-50%) translateY(0); }
  50% { transform: translateX(-50%) translateY(8px); }
}

/* ========================================================================
   GLOBAL FILTER OVERLAY (saturation driver)
   ======================================================================== */
.saturation-overlay {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  transition: filter 0.5s ease;
}

/* ========================================================================
   RESPONSIVE
   ======================================================================== */
@media (max-width: 768px) {
  .confidence-meter {
    right: 12px;
  }

  .confidence-meter__track {
    height: 120px;
  }

  .confidence-meter__label {
    font-size: 8px;
  }

  .section {
    padding: 60px 16px;
  }

  .metrics-row {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .projects-showcase {
    grid-template-columns: 1fr;
  }

  .skills-grid {
    grid-template-columns: 1fr 1fr;
    gap: 10px;
  }

  .narrator {
    bottom: 12px;
    left: 12px;
    max-width: 220px;
  }

  .narrator__bubble {
    font-size: 13px;
    padding: 10px 14px;
  }

  .cta-buttons {
    flex-direction: column;
    align-items: center;
  }

  .social-links {
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }

  .achievement-pill {
    font-size: 11px;
    padding: 6px 12px;
  }

  .realization-card {
    grid-template-columns: 1fr;
    gap: 12px;
    padding: 20px 24px;
  }

  .realization-card__icon {
    width: 36px;
    height: 36px;
  }
}

@media (max-width: 480px) {
  .skills-grid {
    grid-template-columns: 1fr;
  }

  .triumphant-name {
    font-size: 32px;
  }

  .confidence-meter {
    display: none;
  }
}

/* ========================================================================
   PRINT STYLES
   ======================================================================== */
@media print {
  .confidence-meter,
  .scroll-progress,
  .narrator,
  .bg-shapes,
  .scroll-hint,
  .whisper {
    display: none !important;
  }

  .section {
    min-height: auto;
    page-break-inside: avoid;
  }

  body {
    background: white !important;
    color: black !important;
  }
}
</style>
</head>
<body data-phase="doubt">

<!-- Scroll Progress Bar -->
<div class="scroll-progress" id="scrollProgress" role="progressbar" aria-label="Page scroll progress" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>

<!-- Background Shapes -->
<div class="bg-shapes" aria-hidden="true">
  <div class="bg-shape bg-shape--1"></div>
  <div class="bg-shape bg-shape--2"></div>
  <div class="bg-shape bg-shape--3"></div>
</div>

<!-- Confidence Meter -->
<div class="confidence-meter" role="meter" aria-label="Confidence level" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
  <div class="confidence-meter__label">Confidence</div>
  <div class="confidence-meter__track">
    <div class="confidence-meter__fill" id="confidenceFill"></div>
  </div>
  <div class="confidence-meter__value" id="confidenceValue">0%</div>
</div>

<!-- Narrator Bubble -->
<div class="narrator" aria-live="polite" aria-atomic="true">
  <div class="narrator__bubble" id="narratorBubble"></div>
</div>

<!-- =====================================================================
     SECTION 1: DOUBT
     ===================================================================== -->
<section class="section section--doubt" id="sectionDoubt" aria-label="Introduction - doubtful">
  <!-- Floating whispers -->
  <div class="whisper" aria-hidden="true">everyone else is better</div>
  <div class="whisper" aria-hidden="true">they'll figure out I'm faking it</div>
  <div class="whisper" aria-hidden="true">I just got lucky</div>
  <div class="whisper" aria-hidden="true">it's not that impressive</div>
  <div class="whisper" aria-hidden="true">anyone could have done this</div>
  <div class="whisper" aria-hidden="true">I don't belong here</div>

  <div class="section__inner">
    <p class="doubt-name">anshull garg</p>

    <p class="doubt-headline">
      I'm <em>probably</em> not that special...<br>
      I just write code sometimes.
    </p>

    <div class="doubt-claims">
      <div class="doubt-claim" data-reveal="0.1">I work at a company</div>
      <div class="doubt-claim" data-reveal="0.15">I know a programming language or two</div>
      <div class="doubt-claim" data-reveal="0.2">I've built some things, I guess</div>
      <div class="doubt-claim" data-reveal="0.25">People seem to tolerate my code reviews</div>
    </div>

    <p class="doubt-asterisk">* sorry, you probably have better portfolios to look at</p>
  </div>

  <div class="scroll-hint" aria-hidden="true">
    <span class="scroll-hint__text">scroll if you want</span>
    <span class="scroll-hint__arrow"></span>
  </div>
</section>

<!-- Divider 1 -->
<div class="divider divider--1">
  <p class="divider__text" data-reveal-divider>wait, you're still here? ...ok fine, I'll share a bit more</p>
</div>

<!-- =====================================================================
     SECTION 2: HESITANT
     ===================================================================== -->
<section class="section section--hesitant" id="sectionHesitant" aria-label="Skills - hesitant">
  <div class="section__inner">
    <h2 class="hesitant-header">Well, I guess I know a few things...</h2>
    <p class="hesitant-sub">probably not that good at these though</p>

    <div class="skills-grid">
      <div class="skill-item" data-unstrike>
        <div class="skill-item__name">React / Next.js</div>
        <div class="skill-item__doubt">barely competent</div>
        <div class="skill-item__confidence">3+ years, production at scale</div>
      </div>
      <div class="skill-item" data-unstrike>
        <div class="skill-item__name">TypeScript</div>
        <div class="skill-item__doubt">still googles things</div>
        <div class="skill-item__confidence">daily driver, strict mode</div>
      </div>
      <div class="skill-item" data-unstrike>
        <div class="skill-item__name">Node.js</div>
        <div class="skill-item__doubt">makes it up as I go</div>
        <div class="skill-item__confidence">REST + GraphQL APIs</div>
      </div>
      <div class="skill-item" data-unstrike>
        <div class="skill-item__name">Java / Spring Boot</div>
        <div class="skill-item__doubt">it compiles sometimes</div>
        <div class="skill-item__confidence">enterprise microservices</div>
      </div>
      <div class="skill-item" data-unstrike>
        <div class="skill-item__name">System Design</div>
        <div class="skill-item__doubt">I just draw boxes</div>
        <div class="skill-item__confidence">distributed systems at Fortune 1</div>
      </div>
      <div class="skill-item" data-unstrike>
        <div class="skill-item__name">CI/CD & DevOps</div>
        <div class="skill-item__doubt">copies YAML from stack overflow</div>
        <div class="skill-item__confidence">GitHub Actions, Docker, K8s</div>
      </div>
      <div class="skill-item" data-unstrike>
        <div class="skill-item__name">Performance Optimization</div>
        <div class="skill-item__doubt">just refreshes the page</div>
        <div class="skill-item__confidence">Core Web Vitals, profiling</div>
      </div>
      <div class="skill-item" data-unstrike>
        <div class="skill-item__name">Testing</div>
        <div class="skill-item__doubt">console.log("works")</div>
        <div class="skill-item__confidence">Jest, Cypress, TDD</div>
      </div>
    </div>

    <p class="hesitant-footnote" id="hesitantFootnote">
      ...ok maybe I'm being a little hard on myself
    </p>
  </div>
</section>

<!-- Divider 2 -->
<div class="divider divider--2">
  <p class="divider__text" data-reveal-divider>actually, now that I think about it...</p>
</div>

<!-- =====================================================================
     SECTION 3: EMERGING
     ===================================================================== -->
<section class="section section--emerging" id="sectionEmerging" aria-label="Experience - confidence emerging">
  <div class="section__inner">
    <h2 class="emerging-header">Let me reframe a few things.</h2>
    <p class="emerging-sub">
      <span class="reframe">
        <span class="reframe__old">"I work at a company"</span>
        <span class="reframe__new"> &mdash; I work at Walmart. Fortune #1. The largest company on Earth.</span>
      </span>
    </p>

    <div class="realization-cards">
      <div class="realization-card" data-reveal-card>
        <div class="realization-card__icon">&#x1F310;</div>
        <div>
          <div class="realization-card__before">"I work at a company"</div>
          <div class="realization-card__after">Software Developer at Walmart Global Tech</div>
          <div class="realization-card__detail">Building systems for the #1 Fortune 500 company, serving 240M+ customers weekly across 19 countries.</div>
        </div>
      </div>

      <div class="realization-card" data-reveal-card>
        <div class="realization-card__icon">&#x26A1;</div>
        <div>
          <div class="realization-card__before">"I know a programming language or two"</div>
          <div class="realization-card__after">Full-stack engineer across React, Java, Node.js, and more</div>
          <div class="realization-card__detail">Fluent in the entire modern web stack, from pixel-perfect frontends to high-throughput backend services handling millions of requests.</div>
        </div>
      </div>

      <div class="realization-card" data-reveal-card>
        <div class="realization-card__icon">&#x1F3D7;</div>
        <div>
          <div class="realization-card__before">"I've built some things"</div>
          <div class="realization-card__after">Architected production systems at enterprise scale</div>
          <div class="realization-card__detail">Not side projects. Not tutorials. Real, production-grade systems that handle traffic spikes, edge cases, and the chaos of serving a global customer base.</div>
        </div>
      </div>

      <div class="realization-card" data-reveal-card>
        <div class="realization-card__icon">&#x1F50D;</div>
        <div>
          <div class="realization-card__before">"People tolerate my code reviews"</div>
          <div class="realization-card__after">Known for thorough, constructive code reviews that level up the team</div>
          <div class="realization-card__detail">Code review is how engineering culture scales. Elevating the codebase through every PR is not tolerance -- it is leadership.</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Divider 3 -->
<div class="divider divider--3">
  <p class="divider__text" data-reveal-divider>ok, you know what -- let me just show you the receipts</p>
</div>

<!-- =====================================================================
     SECTION 4: CONFIDENT
     ===================================================================== -->
<section class="section section--confident" id="sectionConfident" aria-label="Projects - confident">
  <div class="section__inner">
    <h2 class="confident-header">Here's what I've actually done.</h2>
    <p class="confident-sub">No asterisks. No apologies. Just results.</p>

    <div class="metrics-row">
      <div class="metric-card" data-reveal-metric>
        <div class="metric-card__number" data-count="240">0</div>
        <div class="metric-card__label">Million customers served weekly by systems I help build</div>
      </div>
      <div class="metric-card" data-reveal-metric>
        <div class="metric-card__number" data-count="40" data-suffix="%">0</div>
        <div class="metric-card__label">Latency reduction achieved through performance optimization</div>
      </div>
      <div class="metric-card" data-reveal-metric>
        <div class="metric-card__number" data-prefix="#" data-count="1">0</div>
        <div class="metric-card__label">Fortune 500 company -- the largest in the world</div>
      </div>
    </div>

    <div class="projects-showcase">
      <div class="project-card" data-reveal-project>
        <div class="project-card__tag">Enterprise</div>
        <h3 class="project-card__title">High-Performance E-Commerce Platform</h3>
        <p class="project-card__desc">Architected and optimized frontend systems powering Walmart's digital commerce experience for hundreds of millions of users.</p>
        <div class="project-card__impact">40% reduction in page load latency</div>
        <div class="project-card__stack">
          <span>React</span>
          <span>Next.js</span>
          <span>TypeScript</span>
          <span>GraphQL</span>
          <span>Node.js</span>
        </div>
      </div>

      <div class="project-card" data-reveal-project>
        <div class="project-card__tag">Scale</div>
        <h3 class="project-card__title">Microservice Architecture</h3>
        <p class="project-card__desc">Built and maintained distributed microservices handling massive throughput during peak events like Black Friday and holiday sales.</p>
        <div class="project-card__impact">99.9% uptime during peak traffic events</div>
        <div class="project-card__stack">
          <span>Java</span>
          <span>Spring Boot</span>
          <span>Kafka</span>
          <span>Docker</span>
          <span>Kubernetes</span>
        </div>
      </div>

      <div class="project-card" data-reveal-project>
        <div class="project-card__tag">DX</div>
        <h3 class="project-card__title">Developer Tooling & CI/CD</h3>
        <p class="project-card__desc">Streamlined the developer experience with automated pipelines, testing infrastructure, and deployment workflows.</p>
        <div class="project-card__impact">Deployment time reduced from hours to minutes</div>
        <div class="project-card__stack">
          <span>GitHub Actions</span>
          <span>Jest</span>
          <span>Cypress</span>
          <span>Docker</span>
        </div>
      </div>

      <div class="project-card" data-reveal-project>
        <div class="project-card__tag">Innovation</div>
        <h3 class="project-card__title">Performance Monitoring System</h3>
        <p class="project-card__desc">Designed real-time observability dashboards and alerting systems to proactively detect and resolve performance regressions.</p>
        <div class="project-card__impact">Reduced incident response time by 60%</div>
        <div class="project-card__stack">
          <span>React</span>
          <span>D3.js</span>
          <span>Node.js</span>
          <span>Redis</span>
          <span>Grafana</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Divider 4 -->
<div class="divider divider--4">
  <p class="divider__text" data-reveal-divider>Imposter syndrome had its turn. Now it's my turn.</p>
</div>

<!-- =====================================================================
     SECTION 5: TRIUMPHANT
     ===================================================================== -->
<section class="section section--triumphant" id="sectionTriumphant" aria-label="Full portfolio - triumphant">
  <div class="section__inner">
    <div class="triumphant-badge">
      <span class="triumphant-badge__line"></span>
      <span class="triumphant-badge__text">The real portfolio</span>
      <span class="triumphant-badge__line"></span>
    </div>

    <h1 class="triumphant-name" data-reveal-triumph>Anshull Garg</h1>
    <p class="triumphant-title" data-reveal-triumph>Software Developer</p>
    <p class="triumphant-company" data-reveal-triumph>Walmart Global Tech &mdash; Fortune #1</p>

    <div class="confidence-statement" data-reveal-triumph>
      <p>
        I build <strong>production-grade systems</strong> at the world's largest company.
        I architect <strong>scalable applications</strong> that serve hundreds of millions of people.
        I write code that is <strong>clean, tested, and built to last</strong>.
        And I am done apologizing for being good at what I do.
      </p>
    </div>

    <div class="achievement-ticker" data-reveal-triumph>
      <div class="achievement-pill">
        <span class="achievement-pill__icon">&#x1F3E2;</span>
        <span>Fortune #1 Company</span>
      </div>
      <div class="achievement-pill">
        <span class="achievement-pill__icon">&#x1F30D;</span>
        <span>240M+ Weekly Customers</span>
      </div>
      <div class="achievement-pill">
        <span class="achievement-pill__icon">&#x26A1;</span>
        <span>40% Latency Reduction</span>
      </div>
      <div class="achievement-pill">
        <span class="achievement-pill__icon">&#x1F3AF;</span>
        <span>99.9% Uptime</span>
      </div>
      <div class="achievement-pill">
        <span class="achievement-pill__icon">&#x1F680;</span>
        <span>Full-Stack Engineer</span>
      </div>
      <div class="achievement-pill">
        <span class="achievement-pill__icon">&#x1F4A1;</span>
        <span>System Design</span>
      </div>
    </div>

    <div class="triumphant-cta" data-reveal-triumph>
      <p class="triumphant-cta__text">Let's build something together.</p>
      <div class="cta-buttons">
        <a href="https://linkedin.com/in/anshullgarg" class="cta-btn cta-btn--primary" target="_blank" rel="noopener noreferrer">
          <span>Connect on LinkedIn</span>
          <span aria-hidden="true">&rarr;</span>
        </a>
        <a href="https://github.com/anshul-garg27" class="cta-btn cta-btn--secondary" target="_blank" rel="noopener noreferrer">
          <span>View GitHub</span>
          <span aria-hidden="true">&rarr;</span>
        </a>
      </div>

      <div class="social-links">
        <a href="https://linkedin.com/in/anshullgarg" class="social-link" target="_blank" rel="noopener noreferrer">LinkedIn</a>
        <a href="https://github.com/anshul-garg27" class="social-link" target="_blank" rel="noopener noreferrer">GitHub</a>
        <a href="mailto:anshullgarg@gmail.com" class="social-link">Email</a>
      </div>
    </div>
  </div>
</section>

<!-- =====================================================================
     FOOTER
     ===================================================================== -->
<footer style="text-align: center; padding: 32px 24px; background: #FEF3C7; border-top: 1px solid rgba(245, 158, 11, 0.15);">
  <p style="font-family: var(--font-hand); font-size: 15px; color: var(--triumph-gold-dark);">
    Built with imposter syndrome and a whole lot of confidence underneath.
  </p>
  <p style="font-family: var(--font-code); font-size: 11px; color: var(--doubt-gray-light); margin-top: 8px;">
    &copy; 2026 Anshull Garg
  </p>
</footer>


<script>
/* ========================================================================
   IMPOSTER SYNDROME PORTFOLIO - SCROLL ENGINE
   ======================================================================== */
(function() {
  'use strict';

  // ---- DOM References ----
  const body = document.body;
  const scrollProgress = document.getElementById('scrollProgress');
  const confidenceFill = document.getElementById('confidenceFill');
  const confidenceValue = document.getElementById('confidenceValue');
  const narratorBubble = document.getElementById('narratorBubble');

  // ---- State ----
  let currentPhase = 'doubt';
  let confidenceLevel = 0;
  let narratorTimeout = null;
  let lastNarratorText = '';
  let animatedCounters = new Set();

  // ---- Narrator messages by phase ----
  const narratorMessages = {
    doubt: [
      "you're really reading this?",
      "it's not that impressive, I promise",
      "most people leave by now..."
    ],
    hesitant: [
      "ok those skills aren't terrible",
      "wait, maybe I undersold myself",
      "hmm, this list is actually pretty long"
    ],
    emerging: [
      "oh. Fortune #1. right.",
      "that IS a big deal, isn't it",
      "240 million customers... weekly"
    ],
    confident: [
      "ok these metrics are legit",
      "40% latency reduction is serious",
      "I should stop downplaying this"
    ],
    triumphant: [
      "yeah. I earned this.",
      "imposter syndrome, meet reality",
      "time to own it."
    ]
  };

  // ---- Utility: throttle ----
  function throttle(fn, wait) {
    let last = 0;
    return function(...args) {
      const now = Date.now();
      if (now - last >= wait) {
        last = now;
        fn.apply(this, args);
      }
    };
  }

  // ---- Utility: lerp ----
  function lerp(a, b, t) {
    return a + (b - a) * t;
  }

  // ---- Utility: clamp ----
  function clamp(val, min, max) {
    return Math.min(Math.max(val, min), max);
  }

  // ---- Get scroll percentage ----
  function getScrollPercent() {
    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
    if (docHeight <= 0) return 0;
    return clamp(window.scrollY / docHeight, 0, 1);
  }

  // ---- Determine phase from scroll ----
  function getPhase(scrollPct) {
    if (scrollPct < 0.15) return 'doubt';
    if (scrollPct < 0.3) return 'hesitant';
    if (scrollPct < 0.5) return 'emerging';
    if (scrollPct < 0.75) return 'confident';
    return 'triumphant';
  }

  // ---- Update confidence meter ----
  function updateConfidenceMeter(scrollPct) {
    // Confidence grows non-linearly -- slow at first, then faster
    const raw = scrollPct;
    const eased = raw < 0.3
      ? raw * 0.5
      : raw < 0.6
        ? 0.15 + (raw - 0.3) * 1.5
        : 0.6 + (raw - 0.6) * 1.0;

    confidenceLevel = clamp(Math.round(eased * 100), 0, 100);
    confidenceFill.style.height = confidenceLevel + '%';
    confidenceValue.textContent = confidenceLevel + '%';

    // Update ARIA
    const meterEl = document.querySelector('.confidence-meter');
    if (meterEl) meterEl.setAttribute('aria-valuenow', confidenceLevel);
  }

  // ---- Update scroll progress bar ----
  function updateScrollProgress(scrollPct) {
    scrollProgress.style.width = (scrollPct * 100) + '%';
    scrollProgress.setAttribute('aria-valuenow', Math.round(scrollPct * 100));
  }

  // ---- Update background color ----
  function updateBackground(scrollPct) {
    // Gray -> slightly blue -> golden warmth
    let hue, sat, light;

    if (scrollPct < 0.3) {
      hue = 220;
      sat = lerp(5, 10, scrollPct / 0.3);
      light = lerp(96, 95, scrollPct / 0.3);
    } else if (scrollPct < 0.6) {
      const t = (scrollPct - 0.3) / 0.3;
      hue = lerp(220, 225, t);
      sat = lerp(10, 25, t);
      light = lerp(95, 96, t);
    } else {
      const t = (scrollPct - 0.6) / 0.4;
      hue = lerp(225, 45, t);
      sat = lerp(25, 50, t);
      light = lerp(96, 97, t);
    }

    document.documentElement.style.setProperty('--bg-hue', hue);
    document.documentElement.style.setProperty('--bg-saturation', sat + '%');
    document.documentElement.style.setProperty('--bg-lightness', light + '%');
  }

  // ---- Update phase on body ----
  function updatePhase(phase) {
    if (phase !== currentPhase) {
      currentPhase = phase;
      body.setAttribute('data-phase', phase);
    }
  }

  // ---- Show narrator message ----
  function showNarrator(phase) {
    const messages = narratorMessages[phase];
    if (!messages || messages.length === 0) return;

    // Pick a message that's different from the last one
    let msg;
    do {
      msg = messages[Math.floor(Math.random() * messages.length)];
    } while (msg === lastNarratorText && messages.length > 1);

    lastNarratorText = msg;
    narratorBubble.textContent = msg;
    narratorBubble.classList.add('show');

    clearTimeout(narratorTimeout);
    narratorTimeout = setTimeout(() => {
      narratorBubble.classList.remove('show');
    }, 3500);
  }

  // ---- Reveal doubt claims ----
  function revealDoubtClaims() {
    const claims = document.querySelectorAll('.doubt-claim');
    claims.forEach((claim, i) => {
      setTimeout(() => {
        claim.classList.add('visible');
      }, 300 + i * 400);
    });
  }

  // ---- Unstrike skills based on scroll ----
  function updateSkillStrikes(scrollPct) {
    const skills = document.querySelectorAll('.skill-item[data-unstrike]');
    const startPct = 0.18;
    const endPct = 0.35;

    skills.forEach((skill, i) => {
      const threshold = startPct + ((endPct - startPct) / skills.length) * i;
      if (scrollPct >= threshold) {
        skill.classList.add('unstruck');
      }
    });
  }

  // ---- Animate counters ----
  function animateCounter(el) {
    const target = parseInt(el.getAttribute('data-count'), 10);
    const prefix = el.getAttribute('data-prefix') || '';
    const suffix = el.getAttribute('data-suffix') || '';
    const duration = 1500;
    const startTime = performance.now();

    function tick(now) {
      const elapsed = now - startTime;
      const progress = Math.min(elapsed / duration, 1);
      // Ease out cubic
      const eased = 1 - Math.pow(1 - progress, 3);
      const current = Math.round(eased * target);
      el.textContent = prefix + current + (suffix || (target >= 100 ? 'M+' : ''));
      if (progress < 1) {
        requestAnimationFrame(tick);
      } else {
        el.textContent = prefix + target + (suffix || (target >= 100 ? 'M+' : ''));
      }
    }

    requestAnimationFrame(tick);
  }

  // ---- Intersection Observer for reveal animations ----
  const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const el = entry.target;

        // Divider text
        if (el.hasAttribute('data-reveal-divider')) {
          el.classList.add('visible');
        }

        // Realization cards
        if (el.hasAttribute('data-reveal-card')) {
          el.classList.add('visible');
        }

        // Metric cards
        if (el.hasAttribute('data-reveal-metric')) {
          el.classList.add('visible');
          const counter = el.querySelector('.metric-card__number');
          if (counter && !animatedCounters.has(counter)) {
            animatedCounters.add(counter);
            setTimeout(() => animateCounter(counter), 300);
          }
        }

        // Project cards
        if (el.hasAttribute('data-reveal-project')) {
          el.classList.add('visible');
        }

        // Triumphant elements
        if (el.hasAttribute('data-reveal-triumph')) {
          el.classList.add('visible');
        }

        // Emerging section activation
        if (el.id === 'sectionEmerging') {
          el.classList.add('active');
        }

        revealObserver.unobserve(el);
      }
    });
  }, {
    threshold: 0.2,
    rootMargin: '0px 0px -50px 0px'
  });

  // ---- Register all revealable elements ----
  function registerRevealables() {
    document.querySelectorAll('[data-reveal-divider]').forEach(el => revealObserver.observe(el));
    document.querySelectorAll('[data-reveal-card]').forEach(el => revealObserver.observe(el));
    document.querySelectorAll('[data-reveal-metric]').forEach(el => revealObserver.observe(el));
    document.querySelectorAll('[data-reveal-project]').forEach(el => revealObserver.observe(el));
    document.querySelectorAll('[data-reveal-triumph]').forEach(el => revealObserver.observe(el));

    const emergingSection = document.getElementById('sectionEmerging');
    if (emergingSection) revealObserver.observe(emergingSection);
  }

  // ---- Narrator phase tracker ----
  let lastNarratorPhase = '';
  function maybeShowNarrator(phase) {
    if (phase !== lastNarratorPhase) {
      lastNarratorPhase = phase;
      setTimeout(() => showNarrator(phase), 600);
    }
  }

  // ---- Hesitant footnote update ----
  function updateHesitantFootnote(scrollPct) {
    const footnote = document.getElementById('hesitantFootnote');
    if (!footnote) return;

    if (scrollPct > 0.28) {
      footnote.textContent = 'ok definitely being too hard on myself';
      footnote.style.opacity = '0.8';
      footnote.style.color = 'var(--text-medium)';
    } else if (scrollPct > 0.22) {
      footnote.textContent = '...ok maybe I\'m being a little hard on myself';
      footnote.style.opacity = '0.6';
    }
  }

  // ---- Main scroll handler ----
  const handleScroll = throttle(() => {
    const scrollPct = getScrollPercent();
    const phase = getPhase(scrollPct);

    updateScrollProgress(scrollPct);
    updateConfidenceMeter(scrollPct);
    updateBackground(scrollPct);
    updatePhase(phase);
    updateSkillStrikes(scrollPct);
    updateHesitantFootnote(scrollPct);
    maybeShowNarrator(phase);
  }, 16); // ~60fps

  // ---- Hide scroll hint on scroll ----
  let scrollHintHidden = false;
  function hideScrollHint() {
    if (scrollHintHidden) return;
    const hint = document.querySelector('.scroll-hint');
    if (hint && window.scrollY > 100) {
      hint.style.opacity = '0';
      hint.style.transition = 'opacity 0.5s ease';
      scrollHintHidden = true;
    }
  }

  // ---- Init ----
  function init() {
    // Reveal doubt claims on load
    setTimeout(revealDoubtClaims, 800);

    // Register intersection observers
    registerRevealables();

    // Attach scroll listener
    window.addEventListener('scroll', () => {
      handleScroll();
      hideScrollHint();
    }, { passive: true });

    // Initial state
    handleScroll();

    // Show initial narrator after a beat
    setTimeout(() => showNarrator('doubt'), 2500);
  }

  // ---- Run ----
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

})();
</script>

</body>
</html>
