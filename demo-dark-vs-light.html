<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anshull Garg | Dark vs Light Mode WAR</title>
<meta name="description" content="Anshull Garg - Software Engineer at Walmart. A portfolio where Dark Mode and Light Mode battle for supremacy.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;700&family=Playfair+Display:ital,wght@0,700;1,400&display=swap" rel="stylesheet">
<style>
/* ================================================================
   RESET & FOUNDATIONS
   ================================================================ */
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  /* Dark side palette */
  --dark-bg: #0D0D12;
  --dark-surface: #16161E;
  --dark-elevated: #1E1E28;
  --dark-border: #2A2A36;
  --dark-text: #E8E4F0;
  --dark-muted: #8A8498;
  --dark-accent: #8B5CF6;
  --dark-accent-glow: #A78BFA;
  --dark-accent-hot: #C084FC;
  --dark-card: #1A1A26;
  --dark-tag: #2D2B55;

  /* Light side palette */
  --light-bg: #FAFAF9;
  --light-surface: #FFFFFF;
  --light-elevated: #F5F3EF;
  --light-border: #E2DFD8;
  --light-text: #1A1A2E;
  --light-muted: #6B6880;
  --light-accent: #E85D04;
  --light-accent-glow: #F48C06;
  --light-accent-hot: #DC2F02;
  --light-card: #FFFFFF;
  --light-tag: #FFF3E0;

  /* War zone */
  --battle-line: 50%;
  --char-size: 64px;

  /* Fonts */
  --font-display: 'Space Grotesk', sans-serif;
  --font-body: 'Inter', sans-serif;
  --font-code: 'JetBrains Mono', monospace;
}

html {
  scroll-behavior: smooth;
  scrollbar-width: thin;
  scrollbar-color: #8B5CF6 #0D0D12;
  font-size: 16px;
}

body {
  font-family: var(--font-body);
  overflow-x: hidden;
  background: #0D0D12;
  -webkit-font-smoothing: antialiased;
}

::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: linear-gradient(to bottom, #0D0D12, #FAFAF9); }
::-webkit-scrollbar-thumb {
  background: linear-gradient(to bottom, var(--dark-accent), var(--light-accent));
  border-radius: 4px;
}

a { color: inherit; text-decoration: none; }

/* Full mode overrides */
body.full-dark {
  --active-bg: var(--dark-bg);
  --active-text: var(--dark-text);
}
body.full-light {
  --active-bg: var(--light-bg);
  --active-text: var(--light-text);
}

/* ================================================================
   BATTLEFIELD CONTAINER
   ================================================================ */
.battlefield {
  position: relative;
  width: 100%;
  min-height: 100vh;
}

/* The war divider - a crackling energy line */
.war-divider {
  position: fixed;
  top: 0;
  left: 50%;
  width: 4px;
  height: 100vh;
  z-index: 1000;
  pointer-events: none;
  transform: translateX(-50%);
  transition: opacity 0.6s ease;
}

body.full-dark .war-divider,
body.full-light .war-divider {
  opacity: 0;
}

.war-divider::before {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 2px;
  height: 100%;
  background: linear-gradient(
    180deg,
    var(--dark-accent),
    transparent 10%,
    var(--dark-accent-glow) 25%,
    var(--light-accent) 50%,
    var(--light-accent-glow) 75%,
    transparent 90%,
    var(--dark-accent)
  );
  animation: dividerPulse 3s ease-in-out infinite;
}

.war-divider::after {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 100%;
  background: linear-gradient(
    180deg,
    transparent,
    rgba(139, 92, 246, 0.08) 25%,
    rgba(232, 93, 4, 0.08) 75%,
    transparent
  );
  filter: blur(10px);
}

@keyframes dividerPulse {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

/* Sparks along the divider */
.spark {
  position: fixed;
  left: 50%;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 1001;
  animation: sparkFloat 2s ease-out infinite;
}

.spark:nth-child(odd) {
  background: var(--dark-accent-glow);
  box-shadow: 0 0 8px var(--dark-accent-glow);
}

.spark:nth-child(even) {
  background: var(--light-accent-glow);
  box-shadow: 0 0 8px var(--light-accent-glow);
}

@keyframes sparkFloat {
  0% { transform: translate(-50%, 0) scale(1); opacity: 1; }
  50% { opacity: 0.8; }
  100% { transform: translate(calc(-50% + var(--drift)), -60px) scale(0); opacity: 0; }
}

/* ================================================================
   SECTION LAYOUT: SPLIT SCREEN
   ================================================================ */
.war-section {
  position: relative;
  display: flex;
  min-height: 100vh;
  overflow: hidden;
  transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
}

body.full-dark .war-section { justify-content: center; }
body.full-light .war-section { justify-content: center; }

.dark-half {
  width: 50%;
  background: var(--dark-bg);
  padding: 4rem 3rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  position: relative;
  overflow: hidden;
  transition: width 0.8s cubic-bezier(0.16, 1, 0.3, 1);
}

body.full-dark .dark-half { width: 100%; padding: 4rem 8rem; }
body.full-light .dark-half { width: 0; padding: 0; overflow: hidden; opacity: 0; }

.light-half {
  width: 50%;
  background: var(--light-bg);
  padding: 4rem 3rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  position: relative;
  overflow: hidden;
  transition: width 0.8s cubic-bezier(0.16, 1, 0.3, 1);
}

body.full-light .light-half { width: 100%; padding: 4rem 8rem; }
body.full-dark .light-half { width: 0; padding: 0; overflow: hidden; opacity: 0; }

/* Noise overlays */
.dark-half::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='256' height='256' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 1;
}

.light-half::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='256' height='256' filter='url(%23n)' opacity='0.02'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 1;
}

.half-content {
  position: relative;
  z-index: 2;
  max-width: 520px;
}

.dark-half .half-content { margin-left: auto; margin-right: 2rem; }
.light-half .half-content { margin-right: auto; margin-left: 2rem; }

body.full-dark .half-content,
body.full-light .half-content {
  margin: 0 auto;
  max-width: 700px;
}

/* ================================================================
   CHARACTER SYSTEM - THE COMBATANTS
   ================================================================ */
.character {
  position: relative;
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
}

.avatar {
  width: 56px;
  height: 56px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.6rem;
  font-weight: 700;
  position: relative;
  overflow: hidden;
}

.dark-avatar {
  background: linear-gradient(135deg, #2D2B55, #1A1A2E);
  border: 2px solid var(--dark-accent);
  color: var(--dark-accent-glow);
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
}

.light-avatar {
  background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
  border: 2px solid var(--light-accent);
  color: var(--light-accent);
  box-shadow: 0 0 20px rgba(232, 93, 4, 0.2);
}

/* Character SVG stick figures */
.stick-figure {
  width: 48px;
  height: 48px;
}

.char-name {
  font-family: var(--font-code);
  font-size: 0.65rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.dark-half .char-name { color: var(--dark-accent-glow); }
.light-half .char-name { color: var(--light-accent); }

/* ================================================================
   SPEECH BUBBLES - ARGUMENTS
   ================================================================ */
.speech-bubble {
  position: relative;
  padding: 1rem 1.25rem;
  border-radius: 16px;
  margin-bottom: 1.5rem;
  font-size: 0.9rem;
  line-height: 1.6;
  max-width: 420px;
  animation: bubblePop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

.speech-bubble.from-char {
  border-bottom-left-radius: 4px;
}

/* Dark side bubbles */
.dark-half .speech-bubble {
  background: var(--dark-elevated);
  color: var(--dark-text);
  border: 1px solid var(--dark-border);
}

.dark-half .speech-bubble.argument {
  background: linear-gradient(135deg, var(--dark-elevated), rgba(139, 92, 246, 0.08));
  border-color: var(--dark-accent);
  box-shadow: 0 4px 24px rgba(139, 92, 246, 0.1);
}

/* Light side bubbles */
.light-half .speech-bubble {
  background: var(--light-surface);
  color: var(--light-text);
  border: 1px solid var(--light-border);
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}

.light-half .speech-bubble.argument {
  background: linear-gradient(135deg, #FFFFFF, rgba(232, 93, 4, 0.06));
  border-color: var(--light-accent);
  box-shadow: 0 4px 24px rgba(232, 93, 4, 0.1);
}

.argument-label {
  display: inline-block;
  font-family: var(--font-code);
  font-size: 0.6rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  padding: 0.2rem 0.5rem;
  border-radius: 4px;
  margin-bottom: 0.5rem;
}

.dark-half .argument-label {
  background: rgba(139, 92, 246, 0.15);
  color: var(--dark-accent-glow);
}

.light-half .argument-label {
  background: rgba(232, 93, 4, 0.1);
  color: var(--light-accent);
}

@keyframes bubblePop {
  0% { transform: scale(0.8) translateY(20px); opacity: 0; }
  100% { transform: scale(1) translateY(0); opacity: 1; }
}

/* ================================================================
   SECTION 0: OPENING BATTLEFIELD - HERO
   ================================================================ */
.hero-section {
  min-height: 100vh;
  position: relative;
}

.hero-intro {
  text-align: center;
  margin-bottom: 2rem;
}

.dark-half .hero-name {
  font-family: var(--font-display);
  font-size: 2.8rem;
  font-weight: 700;
  color: var(--dark-text);
  letter-spacing: -0.02em;
  line-height: 1.1;
}

.light-half .hero-name {
  font-family: var(--font-display);
  font-size: 2.8rem;
  font-weight: 700;
  color: var(--light-text);
  letter-spacing: -0.02em;
  line-height: 1.1;
}

.hero-title {
  font-family: var(--font-code);
  font-size: 0.8rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  margin-top: 0.75rem;
}

.dark-half .hero-title { color: var(--dark-accent-glow); }
.light-half .hero-title { color: var(--light-accent); }

.hero-tagline {
  font-size: 1rem;
  line-height: 1.7;
  margin-top: 1rem;
}

.dark-half .hero-tagline { color: var(--dark-muted); }
.light-half .hero-tagline { color: var(--light-muted); }

/* VS badge */
.vs-badge {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1002;
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--dark-accent), var(--light-accent));
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-display);
  font-weight: 700;
  font-size: 1.1rem;
  color: white;
  text-shadow: 0 1px 4px rgba(0,0,0,0.3);
  box-shadow:
    0 0 30px rgba(139, 92, 246, 0.4),
    0 0 30px rgba(232, 93, 4, 0.4);
  animation: vsBadgePulse 2s ease-in-out infinite;
  transition: opacity 0.6s ease, transform 0.6s ease;
}

body.full-dark .vs-badge,
body.full-light .vs-badge {
  opacity: 0;
  transform: translate(-50%, -50%) scale(0);
}

@keyframes vsBadgePulse {
  0%, 100% {
    box-shadow:
      0 0 20px rgba(139, 92, 246, 0.3),
      0 0 20px rgba(232, 93, 4, 0.3);
  }
  50% {
    box-shadow:
      0 0 40px rgba(139, 92, 246, 0.5),
      0 0 40px rgba(232, 93, 4, 0.5);
  }
}

/* ================================================================
   SCROLL PROGRESS BAR - WAR METER
   ================================================================ */
.war-meter {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  z-index: 2000;
  display: flex;
  overflow: hidden;
}

.war-meter-dark {
  height: 100%;
  background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent-glow));
  width: 0%;
  transition: width 0.3s ease;
}

.war-meter-light {
  height: 100%;
  background: linear-gradient(90deg, var(--light-accent-glow), var(--light-accent));
  width: 0%;
  transition: width 0.3s ease;
}

/* ================================================================
   SCORE BOARD
   ================================================================ */
.scoreboard {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1500;
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.5rem 1.25rem;
  border-radius: 100px;
  background: rgba(13, 13, 18, 0.85);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255,255,255,0.08);
  font-family: var(--font-code);
  font-size: 0.75rem;
  transition: opacity 0.4s ease, transform 0.4s ease;
}

body.full-dark .scoreboard,
body.full-light .scoreboard {
  opacity: 0;
  transform: translateX(-50%) translateY(-60px);
}

.score-dark {
  color: var(--dark-accent-glow);
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.score-light {
  color: var(--light-accent);
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.score-vs {
  color: #666;
  font-size: 0.6rem;
}

.score-num {
  font-size: 1.1rem;
}

/* ================================================================
   PROJECT CARDS
   ================================================================ */
.project-card {
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 1.25rem;
  position: relative;
  overflow: hidden;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.project-card:hover {
  transform: translateY(-2px);
}

/* Dark project cards */
.dark-half .project-card {
  background: var(--dark-card);
  border: 1px solid var(--dark-border);
}

.dark-half .project-card:hover {
  box-shadow: 0 8px 32px rgba(139, 92, 246, 0.15);
  border-color: var(--dark-accent);
}

/* Light project cards */
.light-half .project-card {
  background: var(--light-card);
  border: 1px solid var(--light-border);
  box-shadow: 0 1px 3px rgba(0,0,0,0.04);
}

.light-half .project-card:hover {
  box-shadow: 0 8px 32px rgba(232, 93, 4, 0.12);
  border-color: var(--light-accent);
}

.project-icon {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  margin-bottom: 1rem;
}

.dark-half .project-icon {
  background: rgba(139, 92, 246, 0.12);
}

.light-half .project-icon {
  background: rgba(232, 93, 4, 0.08);
}

.project-title {
  font-family: var(--font-display);
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.dark-half .project-title { color: var(--dark-text); }
.light-half .project-title { color: var(--light-text); }

.project-desc {
  font-size: 0.85rem;
  line-height: 1.6;
  margin-bottom: 0.75rem;
}

.dark-half .project-desc { color: var(--dark-muted); }
.light-half .project-desc { color: var(--light-muted); }

.project-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
}

.project-tag {
  font-family: var(--font-code);
  font-size: 0.65rem;
  padding: 0.2rem 0.5rem;
  border-radius: 6px;
  font-weight: 500;
}

.dark-half .project-tag {
  background: var(--dark-tag);
  color: var(--dark-accent-glow);
}

.light-half .project-tag {
  background: var(--light-tag);
  color: var(--light-accent);
}

.project-metric {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  margin-top: 0.75rem;
  font-family: var(--font-code);
  font-size: 0.7rem;
}

.dark-half .project-metric { color: var(--dark-accent-glow); }
.light-half .project-metric { color: var(--light-accent); }

/* ================================================================
   SKILLS SECTION
   ================================================================ */
.skill-bar-container {
  margin-bottom: 0.75rem;
}

.skill-label {
  display: flex;
  justify-content: space-between;
  font-family: var(--font-code);
  font-size: 0.72rem;
  margin-bottom: 0.3rem;
}

.dark-half .skill-label { color: var(--dark-text); }
.light-half .skill-label { color: var(--light-text); }

.skill-bar {
  height: 6px;
  border-radius: 3px;
  overflow: hidden;
  position: relative;
}

.dark-half .skill-bar { background: var(--dark-elevated); }
.light-half .skill-bar { background: var(--light-elevated); }

.skill-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 1.5s cubic-bezier(0.16, 1, 0.3, 1);
  width: 0%;
}

.dark-half .skill-fill {
  background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent-hot));
}

.light-half .skill-fill {
  background: linear-gradient(90deg, var(--light-accent), var(--light-accent-glow));
}

/* ================================================================
   EXPERIENCE TIMELINE
   ================================================================ */
.exp-item {
  position: relative;
  padding-left: 1.5rem;
  margin-bottom: 1.5rem;
}

.exp-item::before {
  content: '';
  position: absolute;
  left: 0;
  top: 8px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.dark-half .exp-item::before {
  background: var(--dark-accent);
  box-shadow: 0 0 8px var(--dark-accent);
}

.light-half .exp-item::before {
  background: var(--light-accent);
  box-shadow: 0 0 8px rgba(232, 93, 4, 0.3);
}

.exp-item::after {
  content: '';
  position: absolute;
  left: 3.5px;
  top: 20px;
  width: 1px;
  height: calc(100% - 8px);
}

.dark-half .exp-item::after { background: var(--dark-border); }
.light-half .exp-item::after { background: var(--light-border); }

.exp-item:last-child::after { display: none; }

.exp-role {
  font-family: var(--font-display);
  font-weight: 600;
  font-size: 1rem;
}

.dark-half .exp-role { color: var(--dark-text); }
.light-half .exp-role { color: var(--light-text); }

.exp-company {
  font-family: var(--font-code);
  font-size: 0.75rem;
  font-weight: 600;
  margin-top: 0.15rem;
}

.dark-half .exp-company { color: var(--dark-accent-glow); }
.light-half .exp-company { color: var(--light-accent); }

.exp-date {
  font-size: 0.72rem;
  margin-top: 0.15rem;
}

.dark-half .exp-date { color: var(--dark-muted); }
.light-half .exp-date { color: var(--light-muted); }

.exp-desc {
  font-size: 0.82rem;
  line-height: 1.6;
  margin-top: 0.5rem;
}

.dark-half .exp-desc { color: var(--dark-muted); }
.light-half .exp-desc { color: var(--light-muted); }

/* ================================================================
   ARGUMENT COUNTER-ATTACKS (flying text)
   ================================================================ */
.flying-text {
  position: fixed;
  z-index: 1500;
  font-family: var(--font-display);
  font-weight: 700;
  font-size: 1rem;
  pointer-events: none;
  white-space: nowrap;
  animation: flyAcross 1.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  opacity: 0;
}

@keyframes flyAcross {
  0% { opacity: 0; transform: translateX(var(--start-x)) scale(0.8); }
  20% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; transform: translateX(var(--end-x)) scale(1.1); }
}

/* ================================================================
   SECTION HEADERS
   ================================================================ */
.section-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  font-family: var(--font-code);
  font-size: 0.65rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  padding: 0.3rem 0.75rem;
  border-radius: 100px;
  margin-bottom: 1.25rem;
}

.dark-half .section-badge {
  background: rgba(139, 92, 246, 0.1);
  color: var(--dark-accent-glow);
  border: 1px solid rgba(139, 92, 246, 0.2);
}

.light-half .section-badge {
  background: rgba(232, 93, 4, 0.06);
  color: var(--light-accent);
  border: 1px solid rgba(232, 93, 4, 0.15);
}

.section-title {
  font-family: var(--font-display);
  font-weight: 700;
  font-size: 1.6rem;
  margin-bottom: 0.5rem;
  letter-spacing: -0.02em;
}

.dark-half .section-title { color: var(--dark-text); }
.light-half .section-title { color: var(--light-text); }

/* ================================================================
   CONTACT SECTION
   ================================================================ */
.contact-link {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  border-radius: 12px;
  margin-bottom: 0.5rem;
  font-size: 0.85rem;
  transition: all 0.3s ease;
  cursor: pointer;
}

.dark-half .contact-link {
  background: var(--dark-elevated);
  color: var(--dark-text);
  border: 1px solid var(--dark-border);
}

.dark-half .contact-link:hover {
  border-color: var(--dark-accent);
  background: rgba(139, 92, 246, 0.08);
  transform: translateX(4px);
}

.light-half .contact-link {
  background: var(--light-surface);
  color: var(--light-text);
  border: 1px solid var(--light-border);
  box-shadow: 0 1px 3px rgba(0,0,0,0.04);
}

.light-half .contact-link:hover {
  border-color: var(--light-accent);
  background: rgba(232, 93, 4, 0.04);
  transform: translateX(4px);
}

.contact-icon {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.9rem;
  flex-shrink: 0;
}

.dark-half .contact-icon { background: rgba(139, 92, 246, 0.12); }
.light-half .contact-icon { background: rgba(232, 93, 4, 0.08); }

/* ================================================================
   PEACE TREATY SECTION
   ================================================================ */
.treaty-section {
  position: relative;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.treaty-section .dark-half,
.treaty-section .light-half {
  justify-content: center;
  align-items: center;
}

.treaty-content {
  text-align: center;
  max-width: 480px;
  position: relative;
  z-index: 2;
}

.treaty-quote {
  font-family: 'Playfair Display', serif;
  font-style: italic;
  font-size: 1.5rem;
  line-height: 1.5;
  margin-bottom: 1.5rem;
}

.dark-half .treaty-quote { color: var(--dark-accent-glow); }
.light-half .treaty-quote { color: var(--light-accent); }

.handshake-emoji {
  font-size: 3rem;
  display: block;
  margin-bottom: 1rem;
  animation: handshakeWiggle 2s ease-in-out infinite;
}

@keyframes handshakeWiggle {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-5deg); }
  75% { transform: rotate(5deg); }
}

/* ================================================================
   WINNER TOGGLE
   ================================================================ */
.winner-toggle-container {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 2000;
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.6rem 1.25rem;
  border-radius: 100px;
  background: rgba(13, 13, 18, 0.9);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255,255,255,0.1);
  font-family: var(--font-code);
  font-size: 0.72rem;
}

.toggle-label {
  font-weight: 600;
  transition: color 0.3s ease;
}

.toggle-label-dark { color: var(--dark-accent-glow); }
.toggle-label-light { color: var(--light-muted); }

body.full-dark .toggle-label-dark { color: var(--dark-accent-hot); }
body.full-light .toggle-label-light { color: var(--light-accent-hot); }

.toggle-track {
  width: 56px;
  height: 28px;
  border-radius: 14px;
  background: linear-gradient(90deg, var(--dark-accent), var(--light-accent));
  position: relative;
  cursor: pointer;
  transition: all 0.4s ease;
  border: 2px solid transparent;
}

.toggle-track:hover {
  box-shadow: 0 0 16px rgba(139, 92, 246, 0.3), 0 0 16px rgba(232, 93, 4, 0.3);
}

.toggle-thumb {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: white;
  position: absolute;
  top: 1px;
  left: 1px;
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.toggle-track[data-state="dark"] .toggle-thumb {
  left: 1px;
  background: var(--dark-bg);
  box-shadow: 0 0 8px var(--dark-accent);
}

.toggle-track[data-state="light"] .toggle-thumb {
  left: 31px;
  background: var(--light-bg);
  box-shadow: 0 0 8px var(--light-accent);
}

.toggle-track[data-state="war"] .toggle-thumb {
  left: 15px;
  background: white;
}

.toggle-reset {
  font-family: var(--font-code);
  font-size: 0.6rem;
  color: #666;
  cursor: pointer;
  text-decoration: underline;
  text-underline-offset: 2px;
  transition: color 0.3s ease;
  background: none;
  border: none;
  padding: 0;
}

.toggle-reset:hover { color: #999; }

/* ================================================================
   SCROLL REVEAL ANIMATION
   ================================================================ */
.reveal {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1),
              transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
}

.reveal.visible {
  opacity: 1;
  transform: translateY(0);
}

.reveal-delay-1 { transition-delay: 0.1s; }
.reveal-delay-2 { transition-delay: 0.2s; }
.reveal-delay-3 { transition-delay: 0.3s; }
.reveal-delay-4 { transition-delay: 0.4s; }

/* ================================================================
   FLOATING PARTICLES
   ================================================================ */
.particle-field {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
}

.particle {
  position: absolute;
  border-radius: 50%;
  opacity: 0;
  animation: particleDrift linear infinite;
}

@keyframes particleDrift {
  0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
  10% { opacity: 0.6; }
  90% { opacity: 0.6; }
  100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
}

/* ================================================================
   RESPONSIVE
   ================================================================ */
@media (max-width: 900px) {
  .war-section {
    flex-direction: column;
  }
  .dark-half, .light-half {
    width: 100% !important;
    padding: 3rem 1.5rem !important;
    opacity: 1 !important;
  }
  .dark-half .half-content,
  .light-half .half-content {
    margin: 0 auto;
    max-width: 500px;
  }
  .war-divider {
    display: none;
  }
  .vs-badge {
    position: relative;
    top: auto;
    left: auto;
    transform: none;
    margin: -2rem auto 0;
    z-index: 10;
  }
  .scoreboard {
    font-size: 0.65rem;
    padding: 0.4rem 0.8rem;
    gap: 0.6rem;
  }
  .dark-half .hero-name,
  .light-half .hero-name {
    font-size: 2rem;
  }
  .winner-toggle-container {
    bottom: 12px;
    padding: 0.4rem 0.8rem;
    gap: 0.6rem;
  }
  .section-title {
    font-size: 1.3rem;
  }
}

@media (max-width: 600px) {
  .dark-half, .light-half {
    padding: 2rem 1rem !important;
  }
  .dark-half .hero-name,
  .light-half .hero-name {
    font-size: 1.6rem;
  }
  .treaty-quote {
    font-size: 1.1rem;
  }
}

/* ================================================================
   BATTLE ANIMATIONS
   ================================================================ */
@keyframes shakeLeft {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-4px); }
  75% { transform: translateX(4px); }
}

@keyframes shakeRight {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(4px); }
  75% { transform: translateX(-4px); }
}

.shake-dark { animation: shakeLeft 0.4s ease; }
.shake-light { animation: shakeRight 0.4s ease; }

/* Battle flash effect */
.battle-flash {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 3000;
  opacity: 0;
  transition: opacity 0.1s ease;
}

.battle-flash.dark-flash { background: radial-gradient(circle at 50% 50%, rgba(139, 92, 246, 0.2), transparent 70%); }
.battle-flash.light-flash { background: radial-gradient(circle at 50% 50%, rgba(232, 93, 4, 0.2), transparent 70%); }
.battle-flash.active { opacity: 1; }

/* Winner celebration */
@keyframes confetti {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: translateY(-100px) rotate(720deg); opacity: 0; }
}

.celebration-particle {
  position: fixed;
  width: 8px;
  height: 8px;
  border-radius: 2px;
  pointer-events: none;
  z-index: 3000;
  animation: confetti 1.5s ease-out forwards;
}
</style>
</head>
<body>

<!-- WAR METER (scroll progress) -->
<div class="war-meter" aria-hidden="true">
  <div class="war-meter-dark" id="warMeterDark"></div>
  <div class="war-meter-light" id="warMeterLight"></div>
</div>

<!-- SCOREBOARD -->
<div class="scoreboard" id="scoreboard" role="status" aria-label="Battle score">
  <div class="score-dark">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" opacity="0.3"/></svg>
    DARK <span class="score-num" id="darkScore">0</span>
  </div>
  <span class="score-vs">VS</span>
  <div class="score-light">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
    LIGHT <span class="score-num" id="lightScore">0</span>
  </div>
</div>

<!-- VS BADGE -->
<div class="vs-badge" id="vsBadge" aria-hidden="true">VS</div>

<!-- WAR DIVIDER -->
<div class="war-divider" id="warDivider" aria-hidden="true"></div>

<!-- SPARK EFFECTS -->
<div id="sparkContainer" aria-hidden="true"></div>

<!-- BATTLE FLASH -->
<div class="battle-flash dark-flash" id="darkFlash"></div>
<div class="battle-flash light-flash" id="lightFlash"></div>

<!-- PARTICLE FIELD -->
<div class="particle-field" id="particleField" aria-hidden="true"></div>


<!-- ============================================================
     SECTION 1: HERO - THE OPENING SALVO
     ============================================================ -->
<section class="war-section hero-section" data-battle="intro">
  <div class="dark-half">
    <div class="half-content">
      <div class="character reveal">
        <div class="avatar dark-avatar">
          <svg class="stick-figure" viewBox="0 0 48 48" fill="none" stroke="#A78BFA" stroke-width="2.5" stroke-linecap="round">
            <circle cx="24" cy="10" r="6"/>
            <line x1="24" y1="16" x2="24" y2="32"/>
            <line x1="24" y1="22" x2="14" y2="28"/>
            <line x1="24" y1="22" x2="34" y2="20"/>
            <line x1="24" y1="32" x2="16" y2="42"/>
            <line x1="24" y1="32" x2="32" y2="42"/>
            <!-- sunglasses -->
            <rect x="18" y="8" width="5" height="3" rx="1" fill="#A78BFA" stroke="none"/>
            <rect x="25" y="8" width="5" height="3" rx="1" fill="#A78BFA" stroke="none"/>
            <line x1="23" y1="9.5" x2="25" y2="9.5" stroke="#A78BFA" stroke-width="1"/>
          </svg>
        </div>
        <span class="char-name">Darko</span>
      </div>

      <div class="hero-intro reveal reveal-delay-1">
        <h1 class="hero-name">Anshull Garg</h1>
        <p class="hero-title">Software Engineer</p>
        <p class="hero-tagline">Building systems that serve millions at Walmart Global Tech. Architect of scalable, high-performance applications.</p>
      </div>

      <div class="speech-bubble argument from-char reveal reveal-delay-2">
        <span class="argument-label">Opening Argument</span>
        <p><strong>Objection!</strong> This portfolio clearly belongs in dark mode. Easier on the eyes. Elegant. Mysterious. Like Anshull's code at 2 AM -- crafted in the shadows, deployed at dawn.</p>
      </div>

      <div class="speech-bubble reveal reveal-delay-3">
        <p>Studies show 82% of developers prefer dark mode. Case closed. Gavel drops. Go home, Light Mode.</p>
      </div>
    </div>
  </div>

  <div class="light-half">
    <div class="half-content">
      <div class="character reveal">
        <div class="avatar light-avatar">
          <svg class="stick-figure" viewBox="0 0 48 48" fill="none" stroke="#E85D04" stroke-width="2.5" stroke-linecap="round">
            <circle cx="24" cy="10" r="6"/>
            <line x1="24" y1="16" x2="24" y2="32"/>
            <line x1="24" y1="22" x2="34" y2="28"/>
            <line x1="24" y1="22" x2="14" y2="20"/>
            <line x1="24" y1="32" x2="16" y2="42"/>
            <line x1="24" y1="32" x2="32" y2="42"/>
            <!-- crown -->
            <path d="M17 6 L20 2 L24 5 L28 2 L31 6" stroke="#E85D04" stroke-width="2" fill="none"/>
          </svg>
        </div>
        <span class="char-name">Lumin</span>
      </div>

      <div class="hero-intro reveal reveal-delay-1">
        <h1 class="hero-name">Anshull Garg</h1>
        <p class="hero-title">Software Engineer</p>
        <p class="hero-tagline">Turning complex problems into elegant software. Clean architecture, seamless experiences, code that scales.</p>
      </div>

      <div class="speech-bubble argument from-char reveal reveal-delay-2">
        <span class="argument-label">Counter-Argument</span>
        <p><strong>Sustained!</strong> Light mode is how professionals read. Better contrast. Clearer typography. Anshull's work deserves to be seen in the LIGHT, not lurking in some shadowy cave!</p>
      </div>

      <div class="speech-bubble reveal reveal-delay-3">
        <p>Meanwhile your precious dark mode makes every recruiter squint. Light mode: because Anshull's skills are too bright to hide.</p>
      </div>
    </div>
  </div>
</section>


<!-- ============================================================
     SECTION 2: ABOUT - CROSS-EXAMINATION
     ============================================================ -->
<section class="war-section" data-battle="about">
  <div class="dark-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        Round 2: About
      </span>

      <div class="speech-bubble argument from-char reveal reveal-delay-1">
        <span class="argument-label">Dark Mode's Case</span>
        <p>Allow me to present Anshull in the <em>proper</em> aesthetic...</p>
      </div>

      <div class="reveal reveal-delay-2" style="margin-bottom: 1.5rem;">
        <h2 class="section-title">The Developer</h2>
        <p style="color: var(--dark-muted); font-size: 0.88rem; line-height: 1.7; margin-bottom: 1rem;">
          A software engineer who thinks in systems and ships in sprints. At Walmart Global Tech, Anshull builds production-grade applications -- the kind that handle traffic spikes, edge cases, and the unpredictable reality of serving millions of users.
        </p>
        <p style="color: var(--dark-muted); font-size: 0.88rem; line-height: 1.7;">
          Specializing in full-stack development with a focus on scalable architecture, performance optimization, and relentless iteration. The kind of engineer who reads the PR description before the code diff.
        </p>
      </div>

      <div class="speech-bubble reveal reveal-delay-3">
        <p>See how the text <em>breathes</em> against the dark background? That is typography at peace. Your eyes thank you.</p>
      </div>
    </div>
  </div>

  <div class="light-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        Round 2: About
      </span>

      <div class="speech-bubble argument from-char reveal reveal-delay-1">
        <span class="argument-label">Light Mode's Rebuttal</span>
        <p>Let me show you how a <em>proper</em> About section looks...</p>
      </div>

      <div class="reveal reveal-delay-2" style="margin-bottom: 1.5rem;">
        <h2 class="section-title">The Developer</h2>
        <p style="color: var(--light-muted); font-size: 0.88rem; line-height: 1.7; margin-bottom: 1rem;">
          Software Engineer with deep experience building scalable applications at enterprise scale. Currently at Walmart Global Tech, working across the full stack to deliver high-impact features for one of the world's largest digital retail platforms.
        </p>
        <p style="color: var(--light-muted); font-size: 0.88rem; line-height: 1.7;">
          Believes great software lives at the intersection of clean architecture, deep user empathy, and relentless iteration. The kind of engineer who thinks "it works on my machine" is not a deployment strategy.
        </p>
      </div>

      <div class="speech-bubble reveal reveal-delay-3">
        <p>Notice the crisp contrast? Every word pops. Dark mode could <em>never</em>. This is called readability. Look it up.</p>
      </div>
    </div>
  </div>
</section>


<!-- ============================================================
     SECTION 3: EXPERIENCE - THE EVIDENCE
     ============================================================ -->
<section class="war-section" data-battle="experience">
  <div class="dark-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 7V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v2"/></svg>
        Round 3: Experience
      </span>

      <div class="speech-bubble argument from-char reveal reveal-delay-1">
        <span class="argument-label">Exhibit A</span>
        <p>Enterprise experience looks <strong>magnificent</strong> with a dark backdrop. Like a command center. Like mission control.</p>
      </div>

      <div class="reveal reveal-delay-2">
        <div class="exp-item">
          <h3 class="exp-role">Software Engineer</h3>
          <p class="exp-company">Walmart Global Tech</p>
          <p class="exp-date">Present</p>
          <p class="exp-desc">Architecting scalable systems at Fortune #1. Building production-grade applications serving millions of daily users across the digital retail platform.</p>
        </div>

        <div class="exp-item">
          <h3 class="exp-role">Full-Stack Development</h3>
          <p class="exp-company">Enterprise Scale</p>
          <p class="exp-date">Ongoing</p>
          <p class="exp-desc">Designing APIs, optimizing frontend performance, and collaborating cross-functionally to ship features that handle real-world traffic at massive scale.</p>
        </div>

        <div class="exp-item">
          <h3 class="exp-role">Performance Engineering</h3>
          <p class="exp-company">Systems Architecture</p>
          <p class="exp-date">Core Focus</p>
          <p class="exp-desc">Reducing page load times, optimizing bundle sizes, and building monitoring systems that keep services running at 99.9%+ uptime.</p>
        </div>
      </div>

      <div class="speech-bubble reveal reveal-delay-3">
        <p>The timeline dots GLOW in dark mode. They literally glow. Your fluorescent-lit Light Mode could never achieve this drama.</p>
      </div>
    </div>
  </div>

  <div class="light-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 7V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v2"/></svg>
        Round 3: Experience
      </span>

      <div class="speech-bubble argument from-char reveal reveal-delay-1">
        <span class="argument-label">Exhibit B</span>
        <p>Recruiters read resumes on <strong>white paper</strong>. Light mode is literally how hiring works. Checkmate.</p>
      </div>

      <div class="reveal reveal-delay-2">
        <div class="exp-item">
          <h3 class="exp-role">Software Engineer</h3>
          <p class="exp-company">Walmart Global Tech</p>
          <p class="exp-date">Present</p>
          <p class="exp-desc">Engineering solutions for one of the world's largest digital retail platforms. Owned full-stack feature development from conception to production deployment.</p>
        </div>

        <div class="exp-item">
          <h3 class="exp-role">Scalable Architecture</h3>
          <p class="exp-company">Microservices & APIs</p>
          <p class="exp-date">Ongoing</p>
          <p class="exp-desc">Building and maintaining microservices that process thousands of transactions per second. Focused on reliability, observability, and developer experience.</p>
        </div>

        <div class="exp-item">
          <h3 class="exp-role">Cross-Team Leadership</h3>
          <p class="exp-company">Collaborative Engineering</p>
          <p class="exp-date">Core Focus</p>
          <p class="exp-desc">Coordinating cross-functional efforts, driving code review culture, and mentoring peers through complex architectural decisions.</p>
        </div>
      </div>

      <div class="speech-bubble reveal reveal-delay-3">
        <p>My timeline is clean, scannable, professional. Yours looks like a hacker's terminal. HR departments have feelings too, Darko.</p>
      </div>
    </div>
  </div>
</section>


<!-- ============================================================
     SECTION 4: PROJECTS - THE MAIN EVENT
     ============================================================ -->
<section class="war-section" data-battle="projects">
  <div class="dark-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
        Round 4: Projects
      </span>

      <h2 class="section-title reveal">Selected Work</h2>

      <div class="speech-bubble argument from-char reveal reveal-delay-1">
        <span class="argument-label">Power Move</span>
        <p>Project cards in dark mode look like constellations. Each one a star in Anshull's universe of work. Try arguing with ASTRONOMY.</p>
      </div>

      <div class="project-card reveal reveal-delay-2">
        <div class="project-icon">&#9881;</div>
        <h3 class="project-title">E-Commerce Platform Engine</h3>
        <p class="project-desc">High-performance microservices architecture powering digital commerce at Fortune #1 scale. Handles millions of concurrent users with sub-200ms response times.</p>
        <div class="project-tags">
          <span class="project-tag">React</span>
          <span class="project-tag">Node.js</span>
          <span class="project-tag">Kafka</span>
          <span class="project-tag">Redis</span>
        </div>
        <div class="project-metric">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
          99.9% uptime / millions of daily users
        </div>
      </div>

      <div class="project-card reveal reveal-delay-3">
        <div class="project-icon">&#9889;</div>
        <h3 class="project-title">Performance Optimization Suite</h3>
        <p class="project-desc">Built tooling and dashboards for monitoring and optimizing frontend performance across the platform. Reduced core web vitals by 40%+.</p>
        <div class="project-tags">
          <span class="project-tag">TypeScript</span>
          <span class="project-tag">Webpack</span>
          <span class="project-tag">Lighthouse</span>
          <span class="project-tag">CI/CD</span>
        </div>
        <div class="project-metric">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
          40% reduction in LCP / 60% smaller bundles
        </div>
      </div>

      <div class="project-card reveal reveal-delay-4">
        <div class="project-icon">&#128640;</div>
        <h3 class="project-title">Real-Time Data Pipeline</h3>
        <p class="project-desc">Event-driven architecture for processing retail analytics at scale. Ingests and transforms terabytes of data daily for real-time decision making.</p>
        <div class="project-tags">
          <span class="project-tag">Java</span>
          <span class="project-tag">Kafka</span>
          <span class="project-tag">Spark</span>
          <span class="project-tag">GCP</span>
        </div>
        <div class="project-metric">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
          TB-scale daily / sub-second latency
        </div>
      </div>
    </div>
  </div>

  <div class="light-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
        Round 4: Projects
      </span>

      <h2 class="section-title reveal">Selected Work</h2>

      <div class="speech-bubble argument from-char reveal reveal-delay-1">
        <span class="argument-label">Haymaker</span>
        <p>Project cards with a clean white background and crisp shadows. This is how Apple presents products. You know, the most valuable company in the world? Yeah.</p>
      </div>

      <div class="project-card reveal reveal-delay-2">
        <div class="project-icon">&#9881;</div>
        <h3 class="project-title">E-Commerce Platform Engine</h3>
        <p class="project-desc">Full-stack commerce platform serving one of the world's largest retailers. Architected for resilience, scalability, and developer velocity.</p>
        <div class="project-tags">
          <span class="project-tag">React</span>
          <span class="project-tag">Node.js</span>
          <span class="project-tag">Kafka</span>
          <span class="project-tag">Redis</span>
        </div>
        <div class="project-metric">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
          99.9% uptime / millions of daily users
        </div>
      </div>

      <div class="project-card reveal reveal-delay-3">
        <div class="project-icon">&#9889;</div>
        <h3 class="project-title">Performance Optimization Suite</h3>
        <p class="project-desc">Comprehensive monitoring and optimization toolkit. Automated performance audits, identified bottlenecks, and shipped measurable improvements.</p>
        <div class="project-tags">
          <span class="project-tag">TypeScript</span>
          <span class="project-tag">Webpack</span>
          <span class="project-tag">Lighthouse</span>
          <span class="project-tag">CI/CD</span>
        </div>
        <div class="project-metric">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
          40% reduction in LCP / 60% smaller bundles
        </div>
      </div>

      <div class="project-card reveal reveal-delay-4">
        <div class="project-icon">&#128640;</div>
        <h3 class="project-title">Real-Time Data Pipeline</h3>
        <p class="project-desc">Streaming data infrastructure for enterprise analytics. Designed for throughput, fault tolerance, and real-time visibility into retail operations.</p>
        <div class="project-tags">
          <span class="project-tag">Java</span>
          <span class="project-tag">Kafka</span>
          <span class="project-tag">Spark</span>
          <span class="project-tag">GCP</span>
        </div>
        <div class="project-metric">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
          TB-scale daily / sub-second latency
        </div>
      </div>
    </div>
  </div>
</section>


<!-- ============================================================
     SECTION 5: SKILLS - WEAPONS COMPARISON
     ============================================================ -->
<section class="war-section" data-battle="skills">
  <div class="dark-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>
        Round 5: Skills Arsenal
      </span>

      <h2 class="section-title reveal">Tech Stack</h2>

      <div class="speech-bubble argument from-char reveal reveal-delay-1">
        <span class="argument-label">Flex</span>
        <p>Glowing purple skill bars. GLOWING. PURPLE. Tell me Light Mode has anything half as cool. I will wait.</p>
      </div>

      <div class="reveal reveal-delay-2">
        <div class="skill-bar-container">
          <div class="skill-label"><span>React / Next.js</span><span>95%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="95"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>Node.js / Express</span><span>90%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="90"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>TypeScript</span><span>92%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="92"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>Java / Spring</span><span>85%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="85"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>System Design</span><span>88%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="88"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>Cloud / DevOps</span><span>82%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="82"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>SQL / NoSQL</span><span>87%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="87"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>Testing / QA</span><span>84%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="84"></div></div>
        </div>
      </div>
    </div>
  </div>

  <div class="light-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>
        Round 5: Skills Arsenal
      </span>

      <h2 class="section-title reveal">Tech Stack</h2>

      <div class="speech-bubble argument from-char reveal reveal-delay-1">
        <span class="argument-label">Counter-Flex</span>
        <p>Warm orange gradient bars on clean white. It is called "accessible design," Darko. You might have heard of it between your 3 AM coding sessions in a dark basement.</p>
      </div>

      <div class="reveal reveal-delay-2">
        <div class="skill-bar-container">
          <div class="skill-label"><span>React / Next.js</span><span>95%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="95"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>Node.js / Express</span><span>90%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="90"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>TypeScript</span><span>92%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="92"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>Java / Spring</span><span>85%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="85"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>System Design</span><span>88%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="88"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>Cloud / DevOps</span><span>82%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="82"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>SQL / NoSQL</span><span>87%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="87"></div></div>
        </div>
        <div class="skill-bar-container">
          <div class="skill-label"><span>Testing / QA</span><span>84%</span></div>
          <div class="skill-bar"><div class="skill-fill" data-width="84"></div></div>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- ============================================================
     SECTION 6: HEATED DEBATE - THE TRASH TALK ROUND
     ============================================================ -->
<section class="war-section" data-battle="debate">
  <div class="dark-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>
        Round 6: Heated Debate
      </span>

      <div class="speech-bubble argument from-char reveal">
        <span class="argument-label">Darko Speaks</span>
        <p>GitHub: dark mode. VS Code: dark mode. Spotify: dark mode. Every cool app defaults to dark. Light mode is just... a flashbang for your retinas.</p>
      </div>

      <div class="speech-bubble reveal reveal-delay-1">
        <p>I literally save battery on OLED screens. I am environmentally friendly. I am the GREEN choice. You cannot argue with the planet, Lumin.</p>
      </div>

      <div class="speech-bubble reveal reveal-delay-2">
        <p>Also, Anshull's code comments are way funnier at 2 AM with dark mode on. <code style="font-family: var(--font-code); font-size: 0.8em; background: rgba(139,92,246,0.15); padding: 0.1em 0.3em; border-radius: 3px;">// TODO: figure out why this works</code></p>
      </div>

      <div class="speech-bubble reveal reveal-delay-3">
        <p>Let us ask the real question: would Batman use light mode? No. Batman uses dark mode. And Batman is cool. Therefore, dark mode is cool. QED.</p>
      </div>
    </div>
  </div>

  <div class="light-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>
        Round 6: Heated Debate
      </span>

      <div class="speech-bubble argument from-char reveal">
        <span class="argument-label">Lumin Fires Back</span>
        <p>Google Docs: light. Wikipedia: light. Every scientific paper ever published: light background. Knowledge itself prefers me!</p>
      </div>

      <div class="speech-bubble reveal reveal-delay-1">
        <p>Studies from the Nielsen Norman Group show that light mode provides better <strong>reading comprehension</strong> for longer text. I am literally backed by science. You are backed by... vibes.</p>
      </div>

      <div class="speech-bubble reveal reveal-delay-2">
        <p>Oh, you save battery? I save people from developing a mysterious dark-mode-induced superiority complex. Which is a bigger threat to society, Darko?</p>
      </div>

      <div class="speech-bubble reveal reveal-delay-3">
        <p>Batman also dresses like a bat and has no work-life balance. Maybe pick a better role model? Like... a well-lit, well-rested software engineer named Anshull.</p>
      </div>
    </div>
  </div>
</section>


<!-- ============================================================
     SECTION 7: CONTACT - DUAL PRESENTATION
     ============================================================ -->
<section class="war-section" data-battle="contact">
  <div class="dark-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
        Round 7: Contact
      </span>

      <h2 class="section-title reveal">Get In Touch</h2>

      <div class="speech-bubble from-char reveal reveal-delay-1">
        <p>Reach out to Anshull. Preferably after sunset, when dark mode truly shines.</p>
      </div>

      <div class="reveal reveal-delay-2">
        <a href="mailto:anshullgarg@gmail.com" class="contact-link">
          <div class="contact-icon">&#9993;</div>
          <div>
            <div style="font-weight: 600; font-size: 0.82rem;">Email</div>
            <div style="font-size: 0.72rem; color: var(--dark-muted);">anshullgarg@gmail.com</div>
          </div>
        </a>
        <a href="https://github.com/anshullgarg" class="contact-link" target="_blank" rel="noopener">
          <div class="contact-icon">&#128187;</div>
          <div>
            <div style="font-weight: 600; font-size: 0.82rem;">GitHub</div>
            <div style="font-size: 0.72rem; color: var(--dark-muted);">github.com/anshullgarg</div>
          </div>
        </a>
        <a href="https://linkedin.com/in/anshullgarg" class="contact-link" target="_blank" rel="noopener">
          <div class="contact-icon">&#128101;</div>
          <div>
            <div style="font-weight: 600; font-size: 0.82rem;">LinkedIn</div>
            <div style="font-size: 0.72rem; color: var(--dark-muted);">linkedin.com/in/anshullgarg</div>
          </div>
        </a>
      </div>
    </div>
  </div>

  <div class="light-half">
    <div class="half-content">
      <span class="section-badge reveal">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
        Round 7: Contact
      </span>

      <h2 class="section-title reveal">Get In Touch</h2>

      <div class="speech-bubble from-char reveal reveal-delay-1">
        <p>Connect with Anshull. Best viewed in natural light, of course.</p>
      </div>

      <div class="reveal reveal-delay-2">
        <a href="mailto:anshullgarg@gmail.com" class="contact-link">
          <div class="contact-icon">&#9993;</div>
          <div>
            <div style="font-weight: 600; font-size: 0.82rem;">Email</div>
            <div style="font-size: 0.72rem; color: var(--light-muted);">anshullgarg@gmail.com</div>
          </div>
        </a>
        <a href="https://github.com/anshullgarg" class="contact-link" target="_blank" rel="noopener">
          <div class="contact-icon">&#128187;</div>
          <div>
            <div style="font-weight: 600; font-size: 0.82rem;">GitHub</div>
            <div style="font-size: 0.72rem; color: var(--light-muted);">github.com/anshullgarg</div>
          </div>
        </a>
        <a href="https://linkedin.com/in/anshullgarg" class="contact-link" target="_blank" rel="noopener">
          <div class="contact-icon">&#128101;</div>
          <div>
            <div style="font-weight: 600; font-size: 0.82rem;">LinkedIn</div>
            <div style="font-size: 0.72rem; color: var(--light-muted);">linkedin.com/in/anshullgarg</div>
          </div>
        </a>
      </div>
    </div>
  </div>
</section>


<!-- ============================================================
     SECTION 8: THE PEACE TREATY
     ============================================================ -->
<section class="war-section treaty-section" data-battle="peace">
  <div class="dark-half">
    <div class="half-content treaty-content">
      <div class="reveal">
        <span class="handshake-emoji" role="img" aria-label="handshake">&#129309;</span>
        <p class="treaty-quote">"Maybe the real portfolio was the friends we made along the way."</p>
        <p style="color: var(--dark-muted); font-size: 0.82rem; line-height: 1.6;">
          After seven rounds of fierce debate, Darko concedes that readability matters.
          Both modes agree: Anshull Garg builds excellent software regardless of background color.
        </p>
        <div style="margin-top: 1.5rem;">
          <div class="speech-bubble" style="display: inline-block;">
            <p style="font-size: 0.82rem;"><strong>Darko:</strong> Fine. You are not <em>that</em> bad, Lumin. Your shadows are crisp.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="light-half">
    <div class="half-content treaty-content">
      <div class="reveal">
        <span class="handshake-emoji" role="img" aria-label="handshake">&#129309;</span>
        <p class="treaty-quote">"Maybe the real portfolio was the friends we made along the way."</p>
        <p style="color: var(--light-muted); font-size: 0.82rem; line-height: 1.6;">
          After seven rounds of fierce debate, Lumin admits that purple glow effects are pretty rad.
          Both modes agree: what matters is the engineer, not the background.
        </p>
        <div style="margin-top: 1.5rem;">
          <div class="speech-bubble" style="display: inline-block;">
            <p style="font-size: 0.82rem;"><strong>Lumin:</strong> ...Your glow effects ARE kind of cool. Do not tell anyone I said that.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- ============================================================
     SECTION 9: FOOTER - CREDITS
     ============================================================ -->
<section class="war-section" style="min-height: auto;">
  <div class="dark-half" style="padding: 2rem 3rem;">
    <div class="half-content" style="text-align: center;">
      <p style="font-family: var(--font-code); font-size: 0.65rem; color: var(--dark-muted);">
        Built with love, caffeine, and an unresolved preference
      </p>
      <p style="font-family: var(--font-code); font-size: 0.6rem; color: var(--dark-border); margin-top: 0.5rem;">
        Anshull Garg &copy; 2026 &middot; Dark Side
      </p>
    </div>
  </div>
  <div class="light-half" style="padding: 2rem 3rem;">
    <div class="half-content" style="text-align: center;">
      <p style="font-family: var(--font-code); font-size: 0.65rem; color: var(--light-muted);">
        Built with clarity, purpose, and proper contrast ratios
      </p>
      <p style="font-family: var(--font-code); font-size: 0.6rem; color: var(--light-border); margin-top: 0.5rem;">
        Anshull Garg &copy; 2026 &middot; Light Side
      </p>
    </div>
  </div>
</section>


<!-- WINNER TOGGLE -->
<div class="winner-toggle-container" id="winnerToggle">
  <span class="toggle-label toggle-label-dark">DARK</span>
  <div class="toggle-track" id="toggleTrack" data-state="war" role="switch" aria-label="Toggle between dark mode, split view, and light mode" tabindex="0">
    <div class="toggle-thumb"></div>
  </div>
  <span class="toggle-label toggle-label-light">LIGHT</span>
  <button class="toggle-reset" id="toggleReset" aria-label="Reset to split view">TRUCE</button>
</div>


<script>
/* ================================================================
   DARK VS LIGHT WAR - INTERACTIVE ENGINE
   ================================================================ */
(function() {
  'use strict';

  // ---- STATE ----
  let darkScore = 0;
  let lightScore = 0;
  let currentMode = 'war'; // 'war', 'dark', 'light'
  let sectionsRevealed = new Set();
  let battleTriggered = new Set();

  // ---- DOM REFS ----
  const body = document.body;
  const darkScoreEl = document.getElementById('darkScore');
  const lightScoreEl = document.getElementById('lightScore');
  const warMeterDark = document.getElementById('warMeterDark');
  const warMeterLight = document.getElementById('warMeterLight');
  const toggleTrack = document.getElementById('toggleTrack');
  const toggleReset = document.getElementById('toggleReset');
  const darkFlash = document.getElementById('darkFlash');
  const lightFlash = document.getElementById('lightFlash');
  const particleField = document.getElementById('particleField');

  // ---- SCORE SYSTEM ----
  function updateScore(side, points) {
    if (side === 'dark') {
      darkScore += points;
      darkScoreEl.textContent = darkScore;
      flashEffect('dark');
    } else {
      lightScore += points;
      lightScoreEl.textContent = lightScore;
      flashEffect('light');
    }
  }

  function flashEffect(side) {
    const el = side === 'dark' ? darkFlash : lightFlash;
    el.classList.add('active');
    setTimeout(() => el.classList.remove('active'), 200);
  }

  // ---- SCROLL-BASED WAR PROGRESSION ----
  function updateWarMeter() {
    const scrollTop = window.scrollY;
    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
    const progress = Math.min(scrollTop / docHeight, 1);
    const halfProgress = progress * 50;

    warMeterDark.style.width = halfProgress + '%';
    warMeterLight.style.width = halfProgress + '%';
  }

  // ---- REVEAL SYSTEM ----
  function initRevealObserver() {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');

          // Animate skill bars when visible
          const skillFills = entry.target.querySelectorAll('.skill-fill');
          skillFills.forEach(fill => {
            const width = fill.getAttribute('data-width');
            if (width) {
              setTimeout(() => {
                fill.style.width = width + '%';
              }, 300);
            }
          });
        }
      });
    }, {
      threshold: 0.15,
      rootMargin: '0px 0px -50px 0px'
    });

    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
  }

  // ---- BATTLE TRIGGER SYSTEM ----
  function initBattleObserver() {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const battleName = entry.target.getAttribute('data-battle');
          if (battleName && !battleTriggered.has(battleName)) {
            battleTriggered.add(battleName);
            triggerBattle(battleName);
          }
        }
      });
    }, {
      threshold: 0.3
    });

    document.querySelectorAll('[data-battle]').forEach(el => observer.observe(el));
  }

  function triggerBattle(name) {
    const battles = {
      'intro': () => {
        setTimeout(() => updateScore('dark', 1), 800);
        setTimeout(() => updateScore('light', 1), 1200);
        setTimeout(() => launchFlyingText('FIGHT!', 'both'), 500);
      },
      'about': () => {
        setTimeout(() => updateScore('dark', 1), 600);
        setTimeout(() => updateScore('light', 1), 1000);
        setTimeout(() => launchFlyingText('TYPOGRAPHY CLASH!', 'dark'), 400);
      },
      'experience': () => {
        setTimeout(() => updateScore('light', 2), 800);
        setTimeout(() => updateScore('dark', 1), 1200);
        setTimeout(() => launchFlyingText('CRITICAL HIT!', 'light'), 600);
      },
      'projects': () => {
        setTimeout(() => updateScore('dark', 2), 700);
        setTimeout(() => updateScore('light', 1), 1100);
        setTimeout(() => launchFlyingText('SUPER EFFECTIVE!', 'dark'), 500);
      },
      'skills': () => {
        setTimeout(() => updateScore('dark', 1), 600);
        setTimeout(() => updateScore('light', 2), 1000);
        setTimeout(() => launchFlyingText('COMBO BREAKER!', 'light'), 400);
      },
      'debate': () => {
        setTimeout(() => updateScore('dark', 2), 500);
        setTimeout(() => updateScore('light', 2), 900);
        setTimeout(() => launchFlyingText('MUTUAL DESTRUCTION!', 'both'), 300);
      },
      'contact': () => {
        setTimeout(() => updateScore('dark', 1), 600);
        setTimeout(() => updateScore('light', 1), 800);
      },
      'peace': () => {
        setTimeout(() => launchFlyingText('TRUCE!', 'both'), 600);
      }
    };

    if (battles[name]) battles[name]();
  }

  // ---- FLYING TEXT ----
  function launchFlyingText(text, side) {
    const el = document.createElement('div');
    el.className = 'flying-text';
    el.textContent = text;

    const yPos = 40 + Math.random() * 20;
    el.style.top = yPos + '%';

    if (side === 'dark') {
      el.style.color = 'var(--dark-accent-glow)';
      el.style.textShadow = '0 0 20px rgba(139, 92, 246, 0.5)';
      el.style.setProperty('--start-x', '-100px');
      el.style.setProperty('--end-x', '30vw');
      el.style.left = '10%';
    } else if (side === 'light') {
      el.style.color = 'var(--light-accent)';
      el.style.textShadow = '0 0 20px rgba(232, 93, 4, 0.5)';
      el.style.setProperty('--start-x', '100px');
      el.style.setProperty('--end-x', '-30vw');
      el.style.right = '10%';
    } else {
      el.style.background = 'linear-gradient(90deg, var(--dark-accent-glow), var(--light-accent))';
      el.style.webkitBackgroundClip = 'text';
      el.style.webkitTextFillColor = 'transparent';
      el.style.backgroundClip = 'text';
      el.style.setProperty('--start-x', '0px');
      el.style.setProperty('--end-x', '0px');
      el.style.left = '50%';
      el.style.transform = 'translateX(-50%)';
      el.style.fontSize = '1.5rem';
    }

    document.body.appendChild(el);
    setTimeout(() => el.remove(), 1600);
  }

  // ---- SPARKS ----
  function createSparks() {
    const container = document.getElementById('sparkContainer');
    const sparkCount = 8;

    function spawnSpark() {
      if (currentMode !== 'war') return;

      const spark = document.createElement('div');
      spark.className = 'spark';
      const y = Math.random() * 100;
      spark.style.top = y + 'vh';
      spark.style.setProperty('--drift', (Math.random() * 40 - 20) + 'px');
      spark.style.animationDuration = (1 + Math.random() * 2) + 's';
      spark.style.animationDelay = Math.random() * 0.5 + 's';
      container.appendChild(spark);

      setTimeout(() => spark.remove(), 3000);
    }

    setInterval(() => {
      if (currentMode === 'war') {
        for (let i = 0; i < 2; i++) spawnSpark();
      }
    }, 800);
  }

  // ---- PARTICLES ----
  function createParticles() {
    const count = 20;
    for (let i = 0; i < count; i++) {
      const p = document.createElement('div');
      p.className = 'particle';
      const size = 2 + Math.random() * 4;
      p.style.width = size + 'px';
      p.style.height = size + 'px';
      p.style.left = Math.random() * 100 + '%';
      p.style.animationDuration = (8 + Math.random() * 12) + 's';
      p.style.animationDelay = Math.random() * 10 + 's';

      if (Math.random() > 0.5) {
        p.style.background = 'var(--dark-accent-glow)';
        p.style.boxShadow = '0 0 6px var(--dark-accent-glow)';
      } else {
        p.style.background = 'var(--light-accent-glow)';
        p.style.boxShadow = '0 0 6px var(--light-accent-glow)';
      }

      particleField.appendChild(p);
    }
  }

  // ---- MODE TOGGLE ----
  let toggleState = 0; // 0 = war (center), -1 = dark, 1 = light

  function setMode(mode) {
    currentMode = mode;
    body.classList.remove('full-dark', 'full-light');

    if (mode === 'dark') {
      body.classList.add('full-dark');
      toggleTrack.setAttribute('data-state', 'dark');
      toggleState = -1;
      launchCelebration('dark');
    } else if (mode === 'light') {
      body.classList.add('full-light');
      toggleTrack.setAttribute('data-state', 'light');
      toggleState = 1;
      launchCelebration('light');
    } else {
      toggleTrack.setAttribute('data-state', 'war');
      toggleState = 0;
    }
  }

  toggleTrack.addEventListener('click', () => {
    // Cycle: war -> dark -> light -> war
    if (toggleState === 0) {
      setMode('dark');
    } else if (toggleState === -1) {
      setMode('light');
    } else {
      setMode('war');
    }
  });

  toggleTrack.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      toggleTrack.click();
    }
  });

  toggleReset.addEventListener('click', () => {
    setMode('war');
  });

  // ---- CELEBRATION PARTICLES ----
  function launchCelebration(side) {
    const colors = side === 'dark'
      ? ['#8B5CF6', '#A78BFA', '#C084FC', '#7C3AED', '#6D28D9']
      : ['#E85D04', '#F48C06', '#DC2F02', '#FAA307', '#FFBA08'];

    for (let i = 0; i < 30; i++) {
      const p = document.createElement('div');
      p.className = 'celebration-particle';
      p.style.left = (20 + Math.random() * 60) + 'vw';
      p.style.top = (30 + Math.random() * 40) + 'vh';
      p.style.background = colors[Math.floor(Math.random() * colors.length)];
      p.style.animationDuration = (0.8 + Math.random() * 1) + 's';
      p.style.animationDelay = Math.random() * 0.3 + 's';
      p.style.width = (4 + Math.random() * 8) + 'px';
      p.style.height = (4 + Math.random() * 8) + 'px';
      p.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
      document.body.appendChild(p);

      setTimeout(() => p.remove(), 2000);
    }
  }

  // ---- SCROLL HANDLER ----
  let ticking = false;
  function onScroll() {
    if (!ticking) {
      requestAnimationFrame(() => {
        updateWarMeter();
        ticking = false;
      });
      ticking = true;
    }
  }

  // ---- KEYBOARD NAVIGATION ----
  document.addEventListener('keydown', (e) => {
    if (e.key === 'd' || e.key === 'D') setMode('dark');
    if (e.key === 'l' || e.key === 'L') setMode('light');
    if (e.key === 'w' || e.key === 'W') setMode('war');
  });

  // ---- INIT ----
  function init() {
    window.addEventListener('scroll', onScroll, { passive: true });
    initRevealObserver();
    initBattleObserver();
    createSparks();
    createParticles();
    updateWarMeter();

    // Initial entrance animation for first visible reveals
    setTimeout(() => {
      document.querySelectorAll('.hero-section .reveal').forEach((el, i) => {
        setTimeout(() => el.classList.add('visible'), i * 150);
      });
    }, 300);
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

})();
</script>

</body>
</html>
